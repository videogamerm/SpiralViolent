(e=>{function t(t){for(var o,i,a=t[0],c=t[1],l=t[2],u=0,p=[];u<a.length;u++)i=a[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(d&&d(t);p.length;)p.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],o=!0,a=1;a<r.length;a++){var c=r[a];0!==n[c]&&(o=!1)}o&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var o={},n={4:0},s=[];function i(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=o,i.d=(e,t,r)=>{i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=(e,t)=>{if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(r,o,(t=>e[t]).bind(null,o));return r},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,"a",t),t},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.p="";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var d=c;s.push([86,3,0]),r()})({102:(e,t,r)=>{"use strict";var o=r(7);const n=document.createElement("textarea");let s;Object.assign(o.a,{SetClipboard(e){s=e,n.focus(),document.execCommand("copy",!1,null)}}),document.body.appendChild(n),document.addEventListener("copy",e=>{e.preventDefault();const{type:t,data:r}=s;e.clipboardData.setData(t||"text/plain",r)})},103:(e,t,r)=>{"use strict";var o=r(15),n=r(7);const s={newScript:"#scripts/_new",settings:"#settings"};o.c.push(()=>{browser.commands.onCommand.addListener(e=>{n.a.TabOpen({url:`${browser.runtime.getManifest().options_ui.page}${s[e]||""}`})})})},104:(e,t,r)=>{"use strict";var o=r(0),n=r(7);const s={};Object.assign(n.a,{async Notification(e,t){const r=t.tab||{},n=await browser.notifications.create({type:"basic",title:e.title||Object(o.m)("extName"),message:e.text,iconUrl:e.image||o.d});return s[n]=r.id,n},RemoveNotification:e=>browser.notifications.clear(e)}),browser.notifications.onClicked.addListener(e=>{const t=s[e];t>=0&&Object(o.x)(t,"NotificationClick",e)}),browser.notifications.onClosed.addListener(e=>{const t=s[e];t>=0&&(Object(o.x)(t,"NotificationClose",e),delete s[e])})},105:function(e,t,r){"use strict";var o=r(3),n=r.n(o),s=r(0),i=r(1),a=r(10),c=r(12),l=r(22),d=r(15),u=r(7);const p={},h={};Object.assign(u.a,{ConfirmInstall:g,GetRequestId(e=[]){const t=Object(s.l)();return p[t]={id:t,eventsToNotify:e,xhr:new XMLHttpRequest},t},HttpRequest(e,t){const{tab:r,frameId:o}=t;(async(e,t,r)=>{var o;const{id:l,chunkType:d,overrideMimeType:h,url:g}=e,w=p[l];if(!w||w.cb)return;w.cb=r,w.anonymous=e.anonymous,w.chunkType=d&&(t.tab.incognito||a.a.isFirefox)?"arraybuffer":d;const{xhr:j}=w,v=[];let y=a.a.isFirefox&&!e.anonymous;if(j.open(e.method||"GET",g,!0,e.user||"",e.password||""),j.setRequestHeader("VM-Verify",l),(o=e.headers,i.c).call(o,([e,t])=>{const r=e.toLowerCase();var o;o=r,f.includes(o)||o.startsWith("proxy-")||o.startsWith("sec-")?v.push({name:e,value:t}):r.startsWith("vm-")||j.setRequestHeader(e,t),"cookie"===r&&(y=!1)}),j.responseType=w.chunkType||"text",j.timeout=Math.max(0,Math.min(2147483647,e.timeout))||0,h&&j.overrideMimeType(h),y){const e=Date.now()/1e3,r=(await browser.cookies.getAll(n()({url:g,storeId:t.tab.cookieStoreId},a.a.isFirefox>=59&&{firstPartyDomain:null}))).filter(t=>t.session||t.expirationDate>e);r.length&&(w.noNativeCookie=!0,v.push({name:"cookie",value:r.map(e=>`${e.name}=${e.value};`).join(" ")}))}m.add(l,v);const O=(e=>{let t,r,o,a,l,d=Promise.resolve();const p=new Set([void 0]),{id:h,chunkType:f,xhr:m}=e,g="blob"===f,w=g?()=>{const e=URL.createObjectURL(o);return c.a.put(`xhrBlob:${e}`,setTimeout(u.a.RevokeBlob,6e4,e),61e3),e}:e=>Object(s.a)(o,16e6*e,16e6),j=()=>{const t=e.responseHeaders||m.getAllResponseHeaders();if(l!==t)return l=t,{responseHeaders:l}},v=t=>{d=d.then(()=>e.cb(t))};return s=>{const c=s.type;if("loadend"===c&&b(e),!e.cb)return;if(t||(t=m.getResponseHeader("Content-Type")||"application/octet-stream"),m.response!==o){o=m.response;try{a=m.responseText,a===o&&(a=["same"])}catch(e){}f&&o&&(r=!g&&Math.ceil(o.byteLength/16e6)||1)}const l=e.eventsToNotify.includes(c),d=l&&!p.has(o);if(v({contentType:t,id:h,chunkType:f,numChunks:r,type:c,data:l&&n()({finalUrl:m.responseURL},j(),{},Object(i.i)(m,["readyState","status","statusText"]),{},d&&{response:r?w(0):o,responseText:a},{},"loaded"in s&&Object(i.i)(s,["lengthComputable","loaded","total"]))}),d){p.add(o);for(let e=1;e<r;e+=1)v({id:h,chunk:w(e),isLastChunk:e===r-1})}}})(w);w.eventsToNotify.forEach(e=>{j[`on${e}`]=O}),j.onloadend=O,j.send(e.data?function e(t){const{cls:r,value:o}=t;if("formdata"===r){const t=new FormData;return o&&i.c.call(o,([r,o])=>{o.forEach(o=>{t.append(r,e(o))})}),t}if(["blob","file"].includes(r)){const{type:e,name:n,lastModified:s}=t,i=new Uint8Array(o.length);for(let e=0;e<o.length;e+=1)i[e]=o.charCodeAt(e);const a=[i.buffer];return"file"===r?new File(a,n,{type:e,lastModified:s}):new Blob(a,{type:e})}if(o)return JSON.parse(o)}(e.data):null)})(e,t,e=>Object(s.x)(r.id,"HttpRequested",e,{frameId:o}))},AbortRequest(e){const t=p[e];t&&(t.xhr.abort(),b(t))},RevokeBlob(e){const t=c.a.pop(`xhrBlob:${e}`);t&&(clearTimeout(t),URL.revokeObjectURL(e))}});const f=["user-agent","accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],m=(()=>{const e={urls:["<all_urls>"],types:["xmlhttprequest"]},t=[browser.webRequest.OnBeforeSendHeadersOptions.EXTRA_HEADERS].filter(Boolean),r={},o=e=>"VM-Verify"===e.name,n=e=>!/^cookie2?$/i.test(e.name),c=e=>!/^set-cookie2?$/i.test(e.name),l=e=>"VM-Verify"!==e.name,d=e=>l(e)&&n(e),u={onBeforeSendHeaders:{options:["requestHeaders","blocking",...t],listener({requestHeaders:e,requestId:t}){var s;const i=(null==(s=e.find(o))?void 0:s.value)||h[t],a=i&&p[i];return i&&a&&(h[t]=i,a.coreId=t,e=(a.noNativeCookie?e.filter(n):e).concat(r[i]||[]).filter(a.anonymous?d:l)),{requestHeaders:e}}},onHeadersReceived:{options:["responseHeaders","blocking",...t],listener({responseHeaders:e,requestId:t}){const r=p[h[t]];if(r){const t=e.length;if(r.anonymous&&(e=e.filter(c)),r.responseHeaders=e.map(({name:e,value:t})=>`${e}: ${t}\r\n`).sort().join(""),e.length<t)return{responseHeaders:e}}}}};return a.a.isChrome&&TextEncoder.prototype.encodeInto&&browser.webRequest.onBeforeSendHeaders.addListener(s.s,e,["extraHeaders"]),{add(t,o){r[t]=o,i.c.call(u,([t,{listener:r,options:o}])=>{browser.webRequest[t].addListener(r,e,o)})},del(e){e in r&&(delete r[e],Object(s.o)(r)&&i.c.call(u,([e,{listener:t}])=>{browser.webRequest[e].removeListener(t)}))}}})();function b(e){e.coreId&&delete h[e.coreId],delete p[e.id],m.del(e.id)}async function g({code:e,from:t,url:r},{tab:o={}}){if(e||(e=(await Object(s.u)(r)).data),!Object(l.c)(e))throw Object(s.m)("msgInvalidScript");c.a.put(r,e,3e3);const i=Object(s.l)(),{id:d,incognito:u}=o;c.a.put(`confirm-${i}`,{incognito:u,url:r,from:t,tabId:d});const{windowId:p}=await browser.tabs.create(n()({url:`/confirm/index.html#${i}`,index:o.index+1||void 0,active:!!o.active},d>=0&&a.a.openerTabIdSupported&&!u&&{openerTabId:d}));p!==o.windowId&&await browser.windows.update(p,{focused:!0})}const w=["^https://greasyfork.org/scripts/[^/]*/code/[^/]*?\\.user\\.js([?#]|$)","^https://openuserjs.org/install/[^/]*/[^/]*?\\.user\\.js([?#]|$)","^https://github.com/[^/]*/[^/]*/raw/[^/]*/[^/]*?\\.user\\.js([?#]|$)","^https://gist.github.com/.*?/[^/]*?.user.js([?#]|$)"].map(e=>new RegExp(e)),j=["//(?:(?:gist.|)github.com|greasyfork.org|openuserjs.org)/"].map(e=>new RegExp(e));function v(e){return e.test(this)}browser.tabs.onCreated.addListener(e=>{!/\.user\.js([?#]|$)/.test(e.pendingUrl||e.url)||a.a.isFirefox>=68&&e.url.startsWith("file:")||c.a.put(`autoclose:${e.id}`,!0,1e4)}),browser.webRequest.onBeforeRequest.addListener(e=>{const{method:t,tabId:r,url:o}=e;if("GET"===t){if(o.startsWith(d.a)){const e=+o.split("#").pop();return{redirectUrl:`${d.a}options/index.html#scripts/${e}`}}return c.a.has(`bypass:${o}`)||j.some(v,o)&&!w.some(v,o)?void 0:((async(e,t)=>{const{data:r}=await Object(s.u)(t).catch(s.s)||{};if(r&&Object(l.e)(r).name){const o=e>=0&&await browser.tabs.get(e)||{};g({code:r,url:t,from:o.url},{tab:o}),(c.a.has(`autoclose:${e}`)||o.pendingUrl&&"chrome://newtab/"===o.url)&&browser.tabs.remove(e)}else c.a.put(`bypass:${t}`,!0,1e4),e>=0&&browser.tabs.update(e,{url:t})})(r,o),{redirectUrl:"javascript:void 0"})}},{urls:["*://*/*.user.js","*://*/*.user.js?*","file://*/*.user.js","file://*/*.user.js?*",`${d.a}*.user.js`],types:["main_frame"]},["blocking"])},106:(e,t,r)=>{"use strict";var o=r(3),n=r.n(o),s=r(0),i=r(10),a=r(15),c=r(7),l=r(9);const d={};Object.assign(c.a,{async TabOpen({url:e,active:t=!0,container:r,insert:o=!0,maybeInWindow:c=!1,pinned:u},p={}){const h=p.tab||await Object(s.i)()||{},f=p.url,m=!f||f.startsWith(a.a),{incognito:b,windowId:g}=h,w=!b||i.a.isFirefox||!/^(chrome[-\w]*):/.test(e);let j=h.cookieStoreId;var v;let y;if(j&&!b&&(j=(0===(v=m?0:r)?"firefox-default":v>0&&`firefox-container-${v}`)||j),j&&(j={cookieStoreId:j}),e.startsWith("blob:")||(m?/^\w+:/.test(e)||(e=browser.runtime.getURL(e)):e=Object(s.j)(e,f)),c&&browser.windows&&Object(l.b)("editorWindow")){const r=n()({url:e,incognito:w&&b},Object(l.b)("editorWindowSimple")&&{type:"popup"},{},i.a.isChrome&&{focused:!!t},{},j),o=Object(l.b)("editorWindowPos"),a=o&&"top"in o;y=(await browser.windows.create(n()({},r,{},o)).catch(a&&s.s)||a&&await browser.windows.create(r)).tabs[0]}const{id:O,windowId:k}=y||await browser.tabs.create(n()({url:e,active:!!t,pinned:!!u},j,{},w&&n()({windowId:g},o&&{index:h.index+1},{},i.a.openerTabIdSupported&&{openerTabId:h.id})));return t&&k!==g&&await browser.windows.update(k,{focused:!0}),d[O]=h.id,{id:O}},TabClose({id:e}={},t){var r;const o=e||(null==t||null==(r=t.tab)?void 0:r.id);o>=0&&browser.tabs.remove(o)}}),i.a.ready.then(()=>{Object.defineProperties(i.a,{openerTabIdSupported:{value:i.a.isChrome||i.a.isFirefox>=57&&"android"!==i.a.os}})}),browser.tabs.onRemoved.addListener(e=>{const t=d[e];t>=0&&(Object(s.x)(t,"TabClosed",e),delete d[e])})},107:(e,t,r)=>{"use strict";var o=r(3),n=r.n(o),s=r(0),i=r(2),a=r(18),c=r(22),l=r(9),d=r(7);Object.assign(d.a,{CheckUpdate:e=>h(Object(a.f)(e)),async CheckUpdateAll(){Object(l.d)("lastUpdate",Date.now());const e=Object(a.g)().filter(e=>e.config.shouldUpdate);return(await Promise.all(e.map(h))).includes(!0)}});const u={},p={"Cache-Control":"no-cache, no-store, must-revalidate"};function h(e){const{id:t}=e.props;return u[t]||(u[t]=(async e=>{const{id:t}=e.props;let r,o,n;try{const{update:c}=await Object(a.j)({id:t,code:await f(e),update:{checking:!1}});return r=(e=>{var t;const r=Object(l.b)("notifyUpdates");return Object(l.b)("notifyUpdatesGlobal")?r:null!=(t=e.config.notifyUpdates)?t:r})(e)&&Object(s.m)("msgScriptUpdated",[c.meta.name||Object(s.m)("labelNoName")]),n={headers:p},!0}catch(e){n=!e.error&&!e.checking&&{}}finally{var i;n&&(o=await Object(a.c)(e,null,n)),(r||o)&&Object(d.c)({title:Object(s.m)("titleScriptUpdated"),body:(i=[r,o],s.y).call(i,"\n")}),delete u[t]}})(e))}async function f({props:{id:e},meta:t,custom:r}){const o=r.downloadURL||t.downloadURL||r.lastInstallURL,a=r.updateURL||t.updateURL||o;if(!a)throw!1;let l;const d={},u={update:d,where:{id:e}};h(Object(s.m)("msgCheckingForUpdate"));try{const{data:e}=await Object(s.u)(a,{headers:n()({},p,{Accept:"text/x-userscript-meta,*/*"})}),{version:r}=Object(c.e)(e);if(Object(s.b)(t.version,r)>=0)h(Object(s.m)("msgNoUpdate"),{checking:!1});else{if(o)return h(Object(s.m)("msgUpdating")),l=Object(s.m)("msgErrorFetchingScript"),(await Object(s.u)(o,{headers:p})).data;h(Object(s.m)("msgNewVersion"),{checking:!1})}}catch(e){h(l||Object(s.m)("msgErrorFetchingUpdateInfo"),{error:e})}throw d;function h(e,{error:t,checking:r=!t}={}){Object.assign(d,{message:e,checking:r,error:t?`${Object(s.m)("genericError")} ${t.status}, ${t.url}`:null}),Object(s.v)(i.b,u)}}},12:(e,t,r)=>{"use strict";var o=r(54),n=r(7);const s=Object(o.a)({lifetime:3e5});Object.assign(n.a,{CacheLoad:e=>s.get(e)||null,CacheHit(e){s.hit(e.key,e.lifetime)},CachePop:e=>s.pop(e)||null}),t.a=s},15:(e,t,r)=>{"use strict";r.d(t,"a",()=>o),r.d(t,"d",()=>n),r.d(t,"c",()=>s),r.d(t,"b",()=>i);const o=browser.runtime.getURL("/"),n=[],s=[];async function i(e){const t=e=>"function"==typeof e?e():e;await Promise.all(n.map(t)),await t(e),await Promise.all(s.map(t)),n.length=0,s.length=0}},16:(e,t,r)=>{"use strict";function o(){const e={};return{on:(t,r)=>{let o=e[t];o||(o=[],e[t]=o),o.push(r)},off:(t,r)=>{const o=e[t];if(o){const e=o.indexOf(r);e>=0&&o.splice(e,1)}},fire:(t,r)=>{const o=e[t];o&&o.forEach(e=>{e(r,t)})}}}r.d(t,"c",()=>o),r.d(t,"a",()=>n.a),r.d(t,"g",()=>n.c),r.d(t,"d",()=>s.b),r.d(t,"h",()=>s.d),r.d(t,"e",()=>s.c),r.d(t,"f",()=>i),r.d(t,"b",()=>a),r(12);var n=r(7),s=r(9);function i(e){return e.split("&").reduce((e,t)=>{const[r,o]=t.split("=").map(decodeURIComponent);return e[r]=o,e},{})}function a(e){return Object.entries(e).map(e=>e.map(encodeURIComponent).join("=")).join("&")}},18:function(e,t,r){"use strict";r.d(t,"k",()=>y),r.d(t,"f",()=>O),r.d(t,"e",()=>k),r.d(t,"g",()=>x),r.d(t,"i",()=>S),r.d(t,"b",()=>$),r.d(t,"h",()=>M),r.d(t,"d",()=>I),r.d(t,"a",()=>C),r.d(t,"l",()=>R),r.d(t,"j",()=>P),r.d(t,"c",()=>D);var o=r(3),n=r.n(o),s=r(0),i=r(2),a=r(1),c=r(6),l=r(10),d=new class{constructor(e){this.events={},this.allowed=e}checkType(e){if(this.allowed&&!this.allowed.includes(e))throw new Error(`Unknown event type: ${e}`)}on(e,t){this.checkType(e);const{events:r}=this;let o=r[e];return o||(o=[],r[e]=o),()=>this.off(e,t)}off(e,t){this.checkType(e);const r=this.events[e];if(r){const e=r.indexOf(t);e>=0&&r.splice(e,1)}}emit(e,t){this.checkType(e);const r=this.events[e];if(r){const o={type:e,data:t,defaultPrevented:!1,preventDefault(){o.defaultPrevented=!0}};r.some(e=>(e(o),o.defaultPrevented))}}}(["scriptEdit","scriptChanged"]),u=r(22),p=r(32),h=r(15),f=r(7),m=r(9);function b(e={}){const t={},{init:r,transform:o}=e;return function(...e){const[r]=e;return t[r]||(t[r]=n.call(this,...e))};async function n(...e){const[n,i]=e;try{const a=await Object(s.u)(n,(null==r?void 0:r(i))||i);if(await(async(e,t)=>{var r,o,n,s;const i=(null==(r=e.headers.get("etag"))||null==(o=r[0])?void 0:o.trim())||+new Date(null==(n=e.headers.get("last-modified"))?void 0:n[0])||+new Date(null==(s=e.headers.get("date"))?void 0:s[0]);if(!i||i!==await c.a.mod.getOne(t))return i&&await c.a.mod.set(t,i),!0})(a,n)){const t=o?await o(a,...e):a.data;await this.set(n,t)}}catch(e){throw e}finally{delete t[n]}}}c.a.cache.fetch=b({init:e=>n()({},e,{responseType:"arraybuffer"}),async transform(e,t,r,o){var n;const i=null==(n=e.headers.get("content-type"))?void 0:n[0];return await(null==o?void 0:o(t,e.data,i)),`${i},${btoa(Object(s.a)(e.data))}`}}),c.a.require.fetch=b();const g={};function w(e){return+e||0}function j(e){return null==e?void 0:e.props.id}async function v(){const e=g.scripts.filter(({props:e},t)=>{const r=t+1,o=e.position!==r;return o&&(e.position=r),o});return g.storeInfo.position=g.scripts.length,e.length&&(await c.a.script.dump(e),Object(m.d)("lastModified",Date.now())),e.length}async function y(){g.scripts.sort((e,t)=>w(e.props.position)-w(t.props.position));const e=await v();return Object(s.v)("ScriptsUpdated",null),e}function O(e){return g.scriptMap[e]}function k({id:e,uri:t,meta:r}){let o;return e?o=O(e):(t||(t=Object(u.b)({meta:r,id:"@@should-have-name"})),o=g.scripts.find(({props:e})=>t===e.uri)),o}function x(){return g.scripts.filter(e=>!e.config.removed)}function S(e){return c.a.value.getMulti(e)}async function $(e){return await c.a.value.dump(e),e}c.a.script.onDump=e=>{g.scriptMap[e.props.id]=e},Object.assign(f.a,{CheckPosition:y,CheckRemove:C,CheckScript({name:e,namespace:t}){const r=k({meta:{name:e,namespace:t}});return r&&!r.config.removed?r.meta.version:null},async ExportZip({values:e}){const t=x(),r=t.map(j),o=await c.a.code.getMulti(r);return{items:t.map(e=>({script:e,code:o[e.props.id]})),values:e?await c.a.value.getMulti(r):void 0}},GetScriptCode:e=>c.a.code.getOne(e),GetMetas:e=>e.map(O).filter(Boolean),MarkRemoved:({id:e,removed:t})=>R(e,{config:{removed:t?1:0},props:{lastModified:Date.now()}}),Move({id:e,offset:t}){const r=O(e),o=g.scripts.indexOf(r);return g.scripts.splice(o,1),g.scripts.splice(o+t,0,r),v()},async RemoveScript(e){const t=g.scripts.indexOf(O(e));return t>=0&&(g.scripts.splice(t,1),await Promise.all([c.a.script.remove(e),c.a.code.remove(e),c.a.value.remove(e)])),Object(s.v)("RemoveScript",e)},ParseMeta:u.e,ParseScript:P,UpdateScriptInfo:({id:e,config:t})=>R(e,{config:t,props:{lastModified:Date.now()}}),Vacuum:async()=>{const e={},t={},r={},o={},n=[[c.a.value,e],[c.a.cache,t],[c.a.require,r],[c.a.code,o]],i=await browser.storage.local.get();a.d.call(i,e=>{n.some(([t,r])=>{const{prefix:o}=t;return!!e.startsWith(o)&&(r[e.slice(o.length)]=-1,!0)})});const l=(e,t)=>{e[t]<0?e[t]=1:e[t]||(e[t]=2)};g.scripts.forEach(n=>{var i;const{id:c}=n.props;l(o,c),l(e,c),n.custom.pathMap||_(n);const{pathMap:d}=n.custom;n.meta.require.forEach(e=>{l(r,d[e]||e)}),(i=n.meta.resources,a.e).call(i,e=>{l(t,d[e]||e)});const{icon:u}=n.meta;if(Object(s.p)(u)){const e=d[u]||u;l(t,e)}}),n.forEach(([e,t])=>{a.c.call(t,([t,r])=>{r<0?e.remove(t):2===r&&e.fetch&&e.fetch(t)})})}}),h.d.push(async()=>{var e;const{version:t}=await browser.storage.local.get("version");t||await new Promise((e,t)=>{console.info("Upgrade database..."),(()=>{const r=indexedDB.open("Violentmonkey",1);r.onsuccess=()=>{try{(r=>{const o=r.transaction(["scripts","require","cache","values"]),n={};let s=3;const i=()=>{s-=1,s||e(browser.storage.local.set(n))},a=(e,r)=>{const n=o.objectStore(e).getAll();n.onsuccess=()=>r(n.result),n.onerror=t};a("scripts",e=>{const t={};e.forEach(e=>{const{code:r,id:o,uri:s}=e;n[`${c.a.script.prefix}${o}`]=(e=>({meta:Object(u.e)(e.code),custom:Object.assign({origInclude:!0,origExclude:!0,origMatch:!0,origExcludeMatch:!0},e.custom),props:{id:e.id,uri:e.uri,position:e.position},config:{enabled:e.enabled,shouldUpdate:e.update}}))(e),n[`${c.a.code.prefix}${o}`]=r,t[s]=o}),a("values",e=>{e.forEach(({uri:e,values:r})=>{const o=t[e];o&&(n[`${c.a.value.prefix}${o}`]=r)}),i()})}),a("cache",e=>{e.forEach(({uri:e,data:t})=>{n[`${c.a.cache.prefix}${e}`]=t}),i()}),a("require",e=>{e.forEach(({uri:e,code:t})=>{n[`${c.a.require.prefix}${e}`]=t}),i()})})(r.result)}catch(e){t(e)}},r.onerror=t,r.onupgradeneeded=()=>{t()}})()}).catch(()=>{}),"2.12.9"!==t&&browser.storage.local.set({version:"2.12.9"});const r=await browser.storage.local.get(),o=[],d={id:0,position:0},p={},h={},f=[],b=[],j=function(e){b.push(this[e]||e)};return a.c.call(r,([e,t])=>{if(e.startsWith(c.a.script.prefix)){var r;const s=w(e.slice(c.a.script.prefix.length));if(!s||p[s])return;p[s]=t;const i=Object(u.b)(t);if(h[i])return;h[i]=t,t.props=n()({},t.props,{id:s,uri:i}),t.custom=n()({},Object(u.a)(),{},t.custom),d.id=Math.max(d.id,s),d.position=Math.max(d.position,w(t.props.position)),o.push(t);const{custom:{pathMap:a={}}={},meta:l={}}=t;null==(r=l.require)||r.forEach(j,a),Object.values(l.resources||{}).forEach(j,a),j.call(a,l.icon)}else e.startsWith(c.a.mod.prefix)&&f.push(e.slice(c.a.mod.prefix.length))}),c.a.mod.removeMulti(f.filter(e=>!b.includes(e))),Object.assign(g,{scripts:o,storeInfo:d,scriptMap:o.reduce((e,t)=>(e[t.props.id]=t,e),{})}),"2.12.9"!==t&&l.a.isFirefox&&(null==(e=r.options)?void 0:e.defaultInjectInto)===i.f&&Object(s.b)(t,"2.12.7")<=0&&Object(m.d)("defaultInjectInto",i.d),y()});const U=["GM_getValue","GM.getValue","GM_setValue","GM.setValue","GM_listValues","GM.listValues","GM_deleteValue","GM.deleteValue"];async function M(e,t){const r=Object(p.a)(e)?[]:g.scripts.filter(r=>!r.config.removed&&(t||!r.meta.noframes)&&Object(p.b)(e,r)),o={},n={},s=r.filter(e=>e.config.enabled);s.forEach(e=>{var t;const{meta:r,custom:s}=e,{pathMap:i=_(e)}=s;r.require.forEach(e=>{o[i[e]||e]=1}),(t=r.resources,a.e).call(t,e=>{n[i[e]||e]=1})});const i=r.map(j),l=s.map(j),d=s.filter(e=>{var t;return null==(t=e.meta.grant)?void 0:t.some(e=>U.includes(e))}).map(j),[u,h,f,m]=await Promise.all([c.a.require.getMulti(Object.keys(o)),c.a.cache.getMulti(Object.keys(n)),c.a.value.getMulti(d,{}),c.a.code.getMulti(l)]);return{inject:{cache:h,ids:i,scripts:s},code:m,enabledIds:l,require:u,values:f,withValueIds:d}}async function I(e){const{scripts:t}=g;return{scripts:e?e.map(O):t,cache:await c.a.cache.getMulti(g.scripts.reduce((e,t)=>{const{icon:r}=t.meta;var o;return Object(s.p)(r)&&e.push((null==(o=t.custom.pathMap)?void 0:o[r])||r),e},[]))}}function C({force:e}={}){const t=Date.now(),r=g.scripts.filter(r=>r.config.removed&&(e||t-w(r.props.lastModified)>i.k));if(r.length){g.scripts=g.scripts.filter(e=>!e.config.removed);const e=r.map(j);c.a.script.removeMulti(e),c.a.code.removeMulti(e),c.a.value.removeMulti(e)}return r.length}async function T(e,t){const r=e.config||{};r.enabled=w(r.enabled),r.shouldUpdate=w(r.shouldUpdate);const o=e.props||{};let i;if(o.id?i=g.scriptMap[o.id]:(g.storeInfo.id+=1,o.id=g.storeInfo.id),o.uri=Object(u.b)(e),o.uuid=o.uuid||(()=>{const e=new Uint16Array(8);return window.crypto.getRandomValues(e),e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768,"01-2-3-4-567".replace(/\d/g,t=>(e[t]+65536).toString(16).slice(-4))})(),g.scripts.some(({props:{id:e,uri:t}={}})=>o.id!==e&&o.uri===t))throw Object(s.m)("msgNamespaceConflict");if(i){e.config=n()({},i.config,{},r),e.props=n()({},i.props,{},o);const t=g.scripts.indexOf(i);g.scripts[t]=e}else o.position?g.storeInfo.position<o.position&&(g.storeInfo.position=o.position):(g.storeInfo.position+=1,o.position=g.storeInfo.position),e.config=r,e.props=o,g.scripts.push(e);return Promise.all([c.a.script.dump(e),c.a.code.set(o.id,t)])}async function R(e,t){const r=g.scriptMap[e];if(!r)throw null;return r.props=n()({},r.props,{},t.props),r.config=n()({},r.config,{},t.config),await c.a.script.dump(r),Object(s.v)(i.b,{where:{id:e},update:r})}async function P(e){const t=Object(u.e)(e.code);if(!t.name)throw Object(s.m)("msgInvalidScript");const r={update:{message:null==e.message?Object(s.m)("msgUpdated"):e.message||""}};let o,a=i.b;const c=await k({id:e.id,meta:t});if(c){if(e.isNew)throw Object(s.m)("msgNamespaceConflict");o=n()({},c)}else({script:o}=Object(u.d)()),a=i.a,r.isNew=!0,r.update.message=Object(s.m)("msgInstalled");return o.config=n()({},o.config,{},e.config,{removed:0}),o.custom=n()({},o.custom,{},e.custom),o.props=n()({},o.props,{lastModified:Date.now(),lastUpdated:Date.now()},e.props),o.meta=t,t.homepageURL||o.custom.homepageURL||!Object(s.p)(e.from)||(o.custom.homepageURL=e.from),Object(s.p)(e.url)&&(o.custom.lastInstallURL=e.url),e.position&&(o.props.position=+e.position),_(o,e.url),await T(o,e.code),D(o,e),Object.assign(r.update,o,e.update),r.where={id:o.props.id},Object(s.v)(a,r),d.emit("scriptChanged",r),r}function _(e,t){const{meta:r}=e,o=t||e.custom.lastInstallURL,n=o?[...r.require,...Object.values(r.resources),r.icon].reduce((e,t)=>{if(t){const r=Object(s.j)(t,o);r!==t&&(e[t]=r)}return e},{}):{};return e.custom.pathMap=n,n}async function D(e,t,r){const{custom:{pathMap:o},meta:n}=e,a=(e,n,s)=>{var i;e=o[e]||e;const a=null==t||null==(i=t[n])?void 0:i[e];return null==a||s?c.a[n].fetch(e,r,s).catch(e=>e):c.a[n].set(e,a)&&null},l=await Promise.all([...n.require.map(e=>a(e,"require")),...Object.values(n.resources).map(e=>a(e,"cache")),Object(s.p)(n.icon)&&a(n.icon,"cache",E)]);if(!t){var d;const t=(d=l.map(L),s.y).call(d,"\n");if(t){const r=Object(s.m)("msgErrorFetchingResource");return Object(s.v)(i.b,{update:{error:t,message:r},where:{id:e.props.id}}),`${r}\n${t}`}}}function E(e,t,r){return new Promise((o,n)=>{const s=URL.createObjectURL(new Blob([t],{type:r})),i=t=>{URL.revokeObjectURL(s),"load"===t.type?o():n({type:"IMAGE_ERROR",url:e})},a=new Image;a.onload=i,a.onerror=i,a.src=s})}function L(e){var t;return e&&(t=[e.status&&`HTTP${e.status}`,e.url],s.y).call(t," ")||e}},22:(e,t,r)=>{"use strict";r.d(t,"c",()=>u),r.d(t,"e",()=>m),r.d(t,"a",()=>b),r.d(t,"d",()=>g),r.d(t,"b",()=>w);var o=r(3),n=r.n(o),s=r(0),i=r(2),a=r(1),c=r(7),l=r(9),d=r(12);function u(e){return!(/^\s*</.test(e)||e.indexOf("// ==UserScript==")<0)}Object.assign(c.a,{CacheNewScript(e){const t=Object(s.l)();return d.a.put(`new-${t}`,g(e)),t},NewScript:e=>e&&d.a.get(`new-${e}`)||g(),ParseMeta:m});const p={default:()=>[],transform:(e,t)=>(e.push(t),e)},h={default:()=>null,transform:(e,t)=>null==e?t:e},f={include:p,exclude:p,match:p,excludeMatch:p,require:p,resource:{default:()=>({}),transform:(e,t)=>{const r=t.match(/^(\w\S*)\s+(.*)/);return r&&(e[r[1]]=r[2]),e}},grant:p,noframes:{default:()=>!1,transform:()=>!0}};function m(e){const t=a.f.call(f,([,e])=>e.default());return(e.match(i.g)[1]||"").replace(/(?:^|\n)\s*\/\/\x20(@\S+)(.*)/g,(e,r,o)=>{const[n,s]=r.slice(1).split(":"),i=n.replace(/[-_](\w)/g,(e,t)=>t.toUpperCase()),a=s?`${i}:${s.toLowerCase()}`:i,c=o.trim(),l=f[a]||h;let d=t[a];void 0===d&&(d=l.default()),t[a]=l.transform(d,c)}),t.resources=t.resource,delete t.resource,!t.homepageURL&&t.homepage&&(t.homepageURL=t.homepage),t}function b(){return{origInclude:!0,origExclude:!0,origMatch:!0,origExcludeMatch:!0}}function g(e){const t=n()({url:"*://*/*",name:"",date:(new Date).toLocaleString()},e),r=Object(l.b)("scriptTemplate").replace(/{{(\w+)}}/g,(e,r)=>{const o=t[r];return null==o?e:o});return{script:{custom:{origInclude:!0,origExclude:!0,origMatch:!0,origExcludeMatch:!0},config:{enabled:1,shouldUpdate:1},meta:m(r)},code:r}}function w(e){const t=e.meta.namespace||"",r=e.meta.name||"";let o=Object(s.f)(`${t}\n${r}\n`);return t||r||(o+=e.props.id||""),o}},32:(e,t,r)=>{"use strict";r.d(t,"b",()=>b),r.d(t,"a",()=>O);var o=r(29),n=r(12),s=r(15),i=r(7),a=r(9);Object.assign(i.a,{TestBlacklist:O}),s.c.push(k),o.c(!0);const c=/(.*?):\/\/([^/]*)\/(.*)/;let l=[];Object(a.c)(e=>{"blacklist"in e&&k(e.blacklist||"")});const d=/^https?$/i;let u={},p=0;function h(e,t,r,o){return t.some(t=>{const s=`${r}:${t}`;let i=n.a.get(s);return i?n.a.hit(s):n.a.put(s,i=o(t)),i.test(e)})}function f(e,t){return h(e,t,"re",v)}function m(e,t){return h(e,t,"match",y)}function b(e,t){n.a.batch(!0);const{custom:r,meta:o}=t,s=g(r.origMatch&&o.match,r.match),i=g(r.origInclude&&o.include,r.include),a=g(r.origExclude&&o.exclude,r.exclude),c=g(r.origExcludeMatch&&o.excludeMatch,r.excludeMatch);let l=!s.length&&!i.length;return l=l||m(e,s),l=l||f(e,i),l=l&&!m(e,c),l=l&&!f(e,a),n.a.batch(!1),l}function g(...e){return e.reduce((e,t)=>t?e.concat(t):e,[])}function w(e){return e.replace(/([.?+[\]{}()|^$])/g,"\\$1").replace(/\*/g,".*?")}function j(e){return e.test.bind(e)}function v(e){if(e.length>1&&"/"===e[0]&&"/"===e[e.length-1])return{test:j(new RegExp(e.slice(1,-1),"i"))};const t=w(e.toLowerCase());if(o.d()&&e.includes(".tld/")){const e=t.replace("\\.tld/","((?:\\.[-\\w]+)+)/");return{test:t=>{const r=t.toLowerCase().match(e);if(r){const e=r[1].slice(1);if(o.b(e)===e)return!0}return!1}}}return{test:j(new RegExp(`^${t}$`,"i"))}}function y(e){let t;if("<all_urls>"===e)t=()=>!0;else{const r=e.match(c);if(r){const e=(e=>{if("*"===e)return()=>1;const t=e.toLowerCase();let r="",n=t,s="";e.startsWith("*.")&&(n=n.slice(2),r="(?:|.*?\\.)"),o.d()&&e.endsWith(".tld")&&(n=n.slice(0,-4),s="((?:\\.[-\\w]+)+)");const i=new RegExp(`^${r}${w(n)}${s}$`);return e=>{if(e=e.toLowerCase(),t===e)return 1;const r=e.match(i);if(r){const[,e]=r;if(!e)return 1;const t=e.slice(1);return o.b(t)===t}return 0}})(r[2]),n=(e=>{const t=e.indexOf("#");let r=e.indexOf("?"),o=w(e);return r>t&&(r=-1),t<0&&(o=r<0?`^${o}(?:[?#]|$)`:`^${o}(?:#|$)`),j(new RegExp(o))})(r[3]);t=t=>{const o=t.match(c);return!!r&&!!o&&((e,t)=>e===t||["*","http*"].includes(e)&&d.test(t)?1:0)(r[1],o[1])&&e(o[2])&&n(o[3])}}else t=()=>!1}return{test:t}}function O(e){let t=u[e];if(void 0===t){const n=l.find(({test:t})=>t(e));t=(null==n?void 0:n.reject)&&n.text,o=t||!1,u[r=e]=o,p+=r.length,p>1e5&&Object.keys(u).some(e=>(p-=e.length,delete u[e],p<75e3))}var r,o;return t}function k(e){n.a.batch(!0);const t=null==e?Object(a.b)("blacklist"):e;l=(Array.isArray(t)?t:(t||"").split("\n")).map(e=>{if(!(e=e.trim())||e.startsWith("#"))return null;const t=e.startsWith("@")&&e.split(/\s/,1)[0],r=t?e.slice(t.length+1).trim():e,o="@include"!==t&&"@match"!==t,{test:n}="@include"===t||"@exclude"===t&&v(r)||!t&&!r.includes("/")&&y(`*://${r}/*`)||y(r);return{reject:o,test:n,text:e}}).filter(Boolean),u={},p=0,n.a.batch(!1)}},61:function(e,t,r){"use strict";r.d(t,"b",()=>M),r.d(t,"c",()=>I),r.d(t,"a",()=>v);var o=r(0),n=r(2),s=r(1),i=r(16),a=r(18),c=r(7);const l={update:c.a.ParseScript,list:async()=>Object(a.g)(),get:c.a.GetScriptCode,remove:e=>c.a.MarkRemoved({id:e,removed:!0})},d=[],u=[],p={},h=Object(o.c)(I,n.i);let f,m=Promise.resolve();function b({name:e,uri:t}){return e||`vm@2-${t}`}function g(e){return/^vm(?:@\d+)?-/.test(e)}function w(e){const t=e.indexOf("-"),[,r]=e.slice(0,t).split("@");if("2"===r)return e.slice(t+1);try{return decodeURIComponent(e.slice(3))}catch(t){return e.slice(3)}}function j(e,t,r){let n=t||e[0];function s(){return n}return{get:s,set:t=>(e.includes(t)?(n=t,r&&r()):console.warn("Invalid state:",t),s()),is:e=>Object(o.g)(e).includes(n)}}function v(){return d.map(e=>{const t=p[e];return{name:t.name,displayName:t.displayName,authState:t.authState.get(),syncState:t.syncState.get(),lastSync:t.config.get("meta",{}).lastSync,progress:t.progress,properties:t.properties,userConfig:t.getUserConfig()}})}function y(e){const t=function(){this.initialize()};return t.prototype=e,t.extend=O,t}function O(e){return y(Object.assign(Object.create(this.prototype),e))}const k=Object(o.c)(()=>{Object(o.v)("UpdateSync",v())}),x=y({name:"base",displayName:"BaseService",delayTime:1e3,urlPrefix:"",metaFile:"Violentmonkey",properties:{authType:"oauth"},getUserConfig:o.s,setUserConfig:o.s,initialize(){this.progress={finished:0,total:0},this.config=(e=>{function t(t){const r=Object(o.t)(t);return r.unshift("services",e),r}return{get:(e,r)=>f.get(t(e),r),set:(e,r)=>{"object"==typeof e?s.c.call(e,([e,r])=>{f.set(t(e),r)}):f.set(t(e),r)},clear:()=>{f.set(t(),{})}}})(this.name),this.authState=j(["idle","initializing","authorizing","authorized","unauthorized","error"],null,k),this.syncState=j(["idle","ready","syncing","error"],null,k),this.lastFetch=Promise.resolve(),this.startSync=this.syncFactory();const e=Object(i.c)();["on","off","fire"].forEach(t=>{this[t]=(...r)=>{e[t](...r)}})},log(...e){console.log(...e)},syncFactory(){let e,t;const r=()=>this.authState.is("authorized")&&$()===this.name,n=()=>{if(!r())return Promise.resolve();this.log("Ready to sync:",this.displayName),this.syncState.set("ready"),m=m.then(()=>new Promise(e=>{t=Object(o.c)(e,1e4),t()})).then(()=>{if(r())return this.sync();this.syncState.set("idle")}).catch(e=>{console.error(e)}).then(()=>{e=null,t=null}),e=m};return()=>(e||n(),t&&t(),e)},prepareHeaders(){this.headers={}},prepare(){return this.authState.set("initializing"),(this.initToken()?Promise.resolve(this.user()):Promise.reject({type:"unauthorized"})).then(()=>{this.authState.set("authorized")},e=>{throw e&&"unauthorized"===e.type?this.authState.set("unauthorized"):(console.error(e),this.authState.set("error")),this.syncState.set("idle"),e})},checkSync(){return this.prepare().then(()=>this.startSync())},user:o.s,acquireLock:o.s,releaseLock:o.s,handleMetaError(e){throw e},getMeta(){return this.get({name:this.metaFile}).then(e=>JSON.parse(e)).catch(e=>this.handleMetaError(e)).then(e=>({name:this.metaFile,data:e}))},initToken(){this.prepareHeaders();const e=this.config.get("token");return this.headers.Authorization=e?`Bearer ${e}`:null,!!e},loadData(e){const{progress:t}=this,{delay:r=this.delayTime}=e;let n=Promise.resolve();return r&&(n=this.lastFetch.then(e=>Object(o.r)(r-(Date.now()-e))).then(()=>Date.now()),this.lastFetch=n),t.total+=1,k(),n.then(()=>{var t;(e=Object.assign({},e)).headers=Object.assign({},this.headers,e.headers);let{url:r}=e;return r.startsWith("/")&&(r=(null!=(t=e.prefix)?t:this.urlPrefix)+r),Object(o.u)(r,e)}).then(({data:e})=>({data:e}),e=>({error:e})).then(({data:e,error:r})=>(t.finished+=1,k(),r?Promise.reject(r):e))},getLocalData:()=>l.list(),getSyncData(){return this.getMeta().then(e=>Promise.all([e,this.list(),this.getLocalData()]))},sync(){return this.progress={finished:0,total:0},this.syncState.set("syncing"),this.prepare().then(()=>this.getSyncData()).then(e=>Promise.resolve(this.acquireLock()).then(()=>e)).then(([e,t,r])=>{const n=e.data||{},c=n.info||{},d=n.timestamp||0;let u=!d||Object.keys(c).length!==t.length;const p=Date.now(),h=Object(i.d)("lastModified"),f={},m=this.config.get("meta",{}),b=!m.timestamp,g=b||d>m.timestamp;this.log("First sync:",b),this.log("Outdated:",g,"(","local:",m.timestamp,"remote:",d,")");const w=[],j=[],v=[],y=[],O=[];n.info=t.reduce((e,t)=>{f[t.uri]=t;let r=c[t.uri];return r||(r={},u=!0),e[t.uri]=r,r.modified||(r.modified=p,u=!0),e},{}),r.forEach(e=>{const{props:{uri:t,position:r,lastModified:o}}=e,s=n.info[t],i=f[t];s&&i?(b||!o||s.modified>o?w.push({local:e,remote:i,info:s}):(s.modified<o&&(j.push({local:e,remote:i}),s.modified=o,u=!0),s.position!==r&&(s.position&&h<=d?O.push({local:e,remote:i,info:s}):(s.position=r,u=!0))),delete f[t]):b||!g||o>d?j.push({local:e}):y.push({local:e})}),s.c.call(f,([e,t])=>{const r=n.info[e];g?w.push({remote:t,info:r}):v.push({remote:t})});const k=[...w.map(({remote:e,info:t})=>(this.log("Download script:",e.uri),this.get(e).then(e=>{const r=(e=>{const t={};try{const r=JSON.parse(e);t.code=r.code,2===r.version?(t.config=r.config,t.custom=r.custom,t.props=r.props):1===r.version&&r.more&&(t.custom=r.more.custom,t.config=Object(s.j)({enabled:r.more.enabled,shouldUpdate:r.more.update}),t.props=Object(s.j)({lastUpdated:r.more.lastUpdated}))}catch(r){t.code=e}return t})(e);if(!r.code)return;t.modified&&Object(s.k)(r,"props.lastModified",t.modified);const o=+t.position;return o&&(r.position=o),!Object(i.d)("syncScriptStatus")&&r.config&&delete r.config.enabled,l.update(r)}))),...j.map(({local:e,remote:t})=>(this.log("Upload script:",e.props.uri),l.get(e.props.id).then(r=>{const o=((e,t,r)=>{let o;return o={version:1,more:{custom:e.custom,enabled:e.config.enabled,update:e.config.shouldUpdate,lastUpdated:e.props.lastUpdated}},Object.assign(o,r)})(e,0,{code:r});return n.info[e.props.uri]={modified:e.props.lastModified,position:e.props.position},u=!0,this.put(Object.assign({},t,{uri:e.props.uri,name:null}),JSON.stringify(o))}))),...v.map(({remote:e})=>(this.log("Remove remote script:",e.uri),delete n.info[e.uri],u=!0,this.remove(e))),...y.map(({local:e})=>(this.log("Remove local script:",e.props.uri),l.remove(e.props.id))),...O.map(({local:e,info:t})=>{const r={};return t.position&&(r.props={position:t.position}),Object(a.l)(e.props.id,r)})];return k.push(Promise.all(k).then(()=>Object(a.k)()).then(e=>{if(e)return u=!0,l.list().then(e=>{e.forEach(e=>{const t=n.info[e.props.uri];t&&(t.position=e.props.position)})})})),k.push(Promise.all(k).then(()=>{const t=[];return u&&(n.timestamp=Date.now(),t.push(this.put(e,JSON.stringify(n)))),m.timestamp=n.timestamp,m.lastSync=Date.now(),this.config.set("meta",m),Promise.all(t)})),Promise.all(k.map(e=>e.then(o.s,e=>e||!0))).then(e=>e.filter(Boolean)).then(e=>{if(e.length)throw e})}).then(()=>{this.syncState.set("idle"),this.log("Sync finished:",this.displayName)},e=>{this.syncState.set("error"),this.log("Failed syncing:",this.displayName),this.log(e)}).then(()=>Promise.resolve(this.releaseLock()).catch(o.s))}});function S(e){u.push(e)}function $(){return f.get("current")}function U(e){return p[e||$()]}function M(){f||(f=(()=>{function e(e,t){const r=Object(o.t)(e);r.unshift("sync"),Object(i.h)(r,t)}return(()=>{let t=Object(i.d)("sync");t&&t.services||(t={services:{}},e([],t))})(),{get:(e,t)=>{const r=Object(o.t)(e);return r.unshift("sync"),Object(i.d)(r,t)},set:e}})(),u.forEach(e=>{const t=new e,{name:r}=t;d.push(r),p[r]=t})),I()}function I(){const e=U();return e&&Promise.resolve((e=>{if(!e.syncState.is(["ready","syncing"]))return e.authState.is(["idle","error"])?e.checkSync():e.authState.is("authorized")?e.startSync():void 0})(e)).then(h)}Object(i.e)(e=>{(null==e?void 0:e["sync.current"])&&M()});const C="https://violentmonkey.github.io/auth_dropbox.html",T=/[\u007f-\uffff]/g,R=e=>`\\u${(e.charCodeAt(0)+65536).toString(16).slice(1)}`;function P(e){return JSON.stringify(e).replace(T,R)}function _(e){return{name:e.name,size:e.size,uri:w(e.name)}}S(x.extend({name:"dropbox",displayName:"Dropbox",user(){return this.loadData({method:"POST",url:"https://api.dropboxapi.com/2/users/get_current_account"}).catch(e=>401===e.status?Promise.reject({type:"unauthorized"}):Promise.reject({type:"error",data:e}))},handleMetaError(e){if(409!==e.status)throw e},list(){return this.loadData({method:"POST",url:"https://api.dropboxapi.com/2/files/list_folder",body:{path:""},responseType:"json"}).then(e=>e.entries.filter(e=>"file"===e[".tag"]&&g(e.name)).map(_))},get(e){const t=b(e);return this.loadData({method:"POST",url:"https://content.dropboxapi.com/2/files/download",headers:{"Dropbox-API-Arg":P({path:`/${t}`})}})},put(e,t){const r=b(e);return this.loadData({method:"POST",url:"https://content.dropboxapi.com/2/files/upload",headers:{"Dropbox-API-Arg":P({path:`/${r}`,mode:"overwrite"}),"Content-Type":"application/octet-stream"},body:t,responseType:"json"}).then(_)},remove(e){const t=b(e);return this.loadData({method:"POST",url:"https://api.dropboxapi.com/2/files/delete",body:{path:`/${t}`},responseType:"json"}).then(_)},authorize(){const e={response_type:"token",client_id:"f0q12zup2uys5w8",redirect_uri:C},t=`https://www.dropbox.com/oauth2/authorize?${Object(i.b)(e)}`;browser.tabs.create({url:t})},authorized(e){const t=Object(i.f)(e);t.access_token&&this.config.set({uid:t.uid,token:t.access_token})},checkAuth(e){const t=`${C}#`;if(e.startsWith(t))return this.authorized(e.slice(t.length)),this.checkSync(),!0},revoke(){return this.config.set({uid:null,token:null}),this.prepare()}}));const D=JSON.parse(window.atob("eyJjbGllbnRfc2VjcmV0Ijoiajl4M09WRXRIdmhpSEtEV09HcXV5TWZaS2s5NjA0MEgifQ==")),E=Object.assign({client_id:"000000004418358A",redirect_uri:"https://violentmonkey.github.io/auth_onedrive.html"},D);function L(e){return{name:e.name,size:e.size,uri:w(e.name)}}S(x.extend({name:"onedrive",displayName:"OneDrive",urlPrefix:"https://api.onedrive.com/v1.0",refreshToken(){const e=this.config.get("refresh_token");return this.authorized({refresh_token:e,grant_type:"refresh_token"}).then(()=>this.prepare())},user(){const e=()=>this.loadData({url:"/drive",responseType:"json"});return e().catch(t=>{if(401===t.status)return this.refreshToken().then(e);throw t}).catch(e=>400===e.status&&"invalid_grant"===Object(s.h)(e,"data.error")?Promise.reject({type:"unauthorized"}):Promise.reject({type:"error",data:e}))},handleMetaError(e){if(404===e.status){var t;const r=(null==(t=e.headers.get("WWW-Authenticate"))?void 0:t[0])||"";return/^Bearer realm="OneDriveAPI"/.test(r)?this.refreshToken().then(()=>this.getMeta()):void 0}throw e},list(){return this.loadData({url:"/drive/special/approot/children",responseType:"json"}).then(e=>e.value.filter(e=>e.file&&g(e.name)).map(L))},get(e){const t=b(e);return this.loadData({url:`/drive/special/approot:/${encodeURIComponent(t)}`,responseType:"json"}).then(e=>this.loadData({url:e["@content.downloadUrl"],delay:!1}))},put(e,t){const r=b(e);return this.loadData({method:"PUT",url:`/drive/special/approot:/${encodeURIComponent(r)}:/content`,headers:{"Content-Type":"application/octet-stream"},body:t,responseType:"json"}).then(L)},remove(e){const t=b(e);return this.loadData({method:"DELETE",url:`/drive/special/approot:/${encodeURIComponent(t)}`}).catch(o.s)},authorize(){const e={client_id:E.client_id,scope:"onedrive.appfolder wl.offline_access",response_type:"code",redirect_uri:E.redirect_uri},t=`https://login.live.com/oauth20_authorize.srf?${Object(i.b)(e)}`;browser.tabs.create({url:t})},checkAuth(e){const t=`${E.redirect_uri}?code=`;if(e.startsWith(t))return this.authState.set("authorizing"),this.authorized({code:e.slice(t.length)}).then(()=>this.checkSync()),!0},revoke(){return this.config.set({uid:null,token:null,refresh_token:null}),this.prepare()},authorized(e){return this.loadData({method:"POST",url:"https://login.live.com/oauth20_token.srf",prefix:"",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(i.b)(Object.assign({},{client_id:E.client_id,client_secret:E.client_secret,redirect_uri:E.redirect_uri,grant_type:"authorization_code"},e)),responseType:"json"}).then(e=>{if(!e.access_token)throw e;this.config.set({uid:e.user_id,token:e.access_token,refresh_token:e.refresh_token})})}}));const A=JSON.parse(window.atob("eyJjbGllbnRfc2VjcmV0IjoiTjBEbTZJOEV3bkJaeE1xMUpuMHN3UER0In0=")),N=Object.assign({client_id:"590447512361-05hjbhnf8ua3iha55e5pgqg15om0cpef.apps.googleusercontent.com",redirect_uri:"https://violentmonkey.github.io/auth_googledrive.html",scope:"https://www.googleapis.com/auth/drive.appdata"},A),z={status:"UNAUTHORIZED"};function q(e){return{id:e.id,name:e.name,size:+e.size,uri:w(e.name)}}S(x.extend({name:"googledrive",displayName:"Google Drive",urlPrefix:"https://www.googleapis.com/drive/v3",refreshToken(){const e=this.config.get("refresh_token");return e?this.authorized({refresh_token:e,grant_type:"refresh_token"}).then(()=>this.prepare()):Promise.reject({type:"unauthorized"})},user(){const e=()=>this.loadData({url:`https://www.googleapis.com/oauth2/v3/tokeninfo?${Object(i.b)({access_token:this.config.get("token")})}`,responseType:"json"});return e().then(e=>"online"===e.access_type?this.loadData({method:"POST",url:`https://accounts.google.com/o/oauth2/revoke?token=${this.config.get("token")}`,prefix:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(()=>(Object(i.g)({title:"Sync Upgraded",body:"Please reauthorize access to your Google Drive to complete the upgradation."}),Promise.reject("Online access revoked."))):e.scope!==N.scope?Promise.reject(z):void 0).catch(t=>t===z||400===t.status&&"Invalid Value"===Object(s.h)(t,"data.error_description")?this.refreshToken().then(e):Promise.reject({type:"error",data:t}))},getSyncData(){return this.loadData({url:`/files?${Object(i.b)({spaces:"appDataFolder",fields:"files(id,name,size)"})}`,responseType:"json"}).then(({files:e})=>{let t;const r=e.filter(e=>!!g(e.name)||(t||e.name!==this.metaFile?this.remove(e):t=e,!1)).map(q).filter(e=>!!e.size||(this.remove(e),!1)),o=t?q(t):{},n=this.get(o).then(e=>JSON.parse(e)).catch(e=>this.handleMetaError(e)).then(e=>Object.assign({},o,{name:this.metaFile,uri:null,data:e}));return Promise.all([n,r,this.getLocalData()])})},authorize(){const e={response_type:"code",access_type:"offline",client_id:N.client_id,redirect_uri:N.redirect_uri,scope:N.scope};this.config.get("refresh_token")||(e.prompt="consent");const t=`https://accounts.google.com/o/oauth2/v2/auth?${Object(i.b)(e)}`;browser.tabs.create({url:t})},checkAuth(e){const t=`${N.redirect_uri}?code=`;if(e.startsWith(t))return this.authState.set("authorizing"),this.authorized({code:decodeURIComponent(e.split("#")[0].slice(t.length))}).then(()=>this.checkSync()),!0},revoke(){return this.config.set({token:null,refresh_token:null}),this.prepare()},authorized(e){return this.loadData({method:"POST",url:"https://www.googleapis.com/oauth2/v4/token",prefix:"",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(i.b)(Object.assign({},{client_id:N.client_id,client_secret:N.client_secret,redirect_uri:N.redirect_uri,grant_type:"authorization_code"},e)),responseType:"json"}).then(e=>{if(!e.access_token)throw e;{const t={token:e.access_token};e.refresh_token&&(t.refresh_token=e.refresh_token),this.config.set(t)}})},handleMetaError:o.s,list(){throw new Error("Not supported")},get({id:e}){return e?this.loadData({url:`/files/${e}?alt=media`}):Promise.reject()},put(e,t){const r=b(e),{id:n}=e,s=Object(o.l)("violentmonkey-is-great-"),i={"Content-Type":`multipart/related; boundary=${s}`},a=n?{name:r}:{name:r,parents:["appDataFolder"]},c=[`--${s}`,"Content-Type: application/json; charset=UTF-8","",JSON.stringify(a),`--${s}`,"Content-Type: text/plain","",t,`--${s}--`,""].join("\r\n"),l=n?`https://www.googleapis.com/upload/drive/v3/files/${n}?uploadType=multipart`:"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart";return this.loadData({url:l,body:c,headers:i,method:n?"PATCH":"POST"})},remove({id:e}){return this.loadData({method:"DELETE",url:`/files/${e}`})}}));var V=r(3),F=r.n(V);const B=Symbol("children");class H{constructor(e,t){this.node=e,this.nsMap=F()({},t),this.parseAttrs(),this.parseName()}static fromXML(e){const t=(new DOMParser).parseFromString(e,"application/xml");return new H(t)}parseAttrs(){const{node:e,nsMap:t}=this,r={},{attributes:o}=e;if(o)for(const o of e.attributes){const{name:e,value:n}=o;"xmlns"===e?t.$=n:e.startsWith("xmlns:")&&(t[e.slice(6)]=n),r[e]=n}this.attrs=r}parseName(){const{node:e,nsMap:t}=this;if(1===e.nodeType){let r=e.tagName,o=t.$;if(r.includes(":")){let e;if([e,r]=r.split(":"),o=t[e],!o)throw new Error(`Unknown namespace: ${e}`)}this.name=o+r}}text(){const{node:e}=this;if(e)return(e.textContent||"").trim()}children(){if(!this[B]){const{node:e,nsMap:t}=this;this[B]=[...e.children].map(e=>new H(e,t))}return this[B]}map(e){return this.children().map(e)}getCallback(e){return"string"==typeof e?(t=e,e=>e.name===t):e;var t}filter(e){return this.children().filter(this.getCallback(e))}find(e){return this.children().find(this.getCallback(e))}attr(e){return this.attrs[e]}}const W={serverUrl:"",anonymous:!1,username:"",password:""};S(x.extend({name:"webdav",displayName:"WebDAV",properties:{authType:"password",serverUrl:null},getUserConfig(){return this.userConfig||(this.userConfig=F()({},W,{},this.config.get("userConfig"))),this.userConfig},setUserConfig(e){Object.assign(this.userConfig,e),this.config.set("userConfig",this.userConfig)},initToken(){var e;this.prepareHeaders();const t=this.getUserConfig();let r=(null==(e=t.serverUrl)?void 0:e.trim())||"";r.includes("://")||(r=`http://${r}`),r.endsWith("/")||(r+="/");try{new URL(r)}catch(e){return this.properties.serverUrl=null,!1}this.properties.serverUrl=`${r}Violentmonkey/`;const{anonymous:o,username:n,password:s}=t;if(o)return!0;if(!n||!s)return!1;const i=window.btoa(`${n}:${s}`);return this.headers.Authorization=`Basic ${i}`,!0},loadData(e){return x.prototype.loadData.call(this,Object.assign({credentials:"omit"},e))},handleMetaError(e){if(![404,409].includes(e.status))throw e},list(){const{serverUrl:e}=this.properties,t=()=>this.loadData({method:"MKCOL",url:e}),r=()=>this.loadData({method:"PROPFIND",url:e,headers:{depth:"1"}}).then(e=>H.fromXML(e).children()[0].map(e=>{const t=e.find("DAV:propstat").find("DAV:prop");if("file"==(t.find("DAV:resourcetype").find("DAV:collection")?"directory":"file")){let o;const n=t.find("DAV:displayname");if(void 0!==n)o=n.text();else{const t=e.find("DAV:href").text();o=decodeURIComponent(t.substring(t.lastIndexOf("/")+1))}if(g(o)){const e=t.find("DAV:getcontentlength");return{name:(r={name:o,size:e?+e.text():0}).name,size:r.size,uri:w(r.name)}}}var r;return null}).filter(Boolean));return r().catch(e=>{if(404===e.status)return t().then(r);throw e})},get(e){const t=b(e),{serverUrl:r}=this.properties;return this.loadData({url:r+t})},put(e,t){const r=b(e),o={"Content-Type":"text/plain"},n=this.config.get("lock");n&&(o.If=`(<${n}>)`);const{serverUrl:s}=this.properties;return this.loadData({method:"PUT",url:s+r,body:t,headers:o})},remove(e){const t=b(e),r={},o=this.config.get("lock");o&&(r.If=`(<${o}>)`);const{serverUrl:n}=this.properties;return this.loadData({method:"DELETE",url:n+t,headers:r})}})),Object.assign(c.a,{SyncAuthorize:()=>{const e=U();e&&e.authorize()},SyncRevoke:()=>{const e=U();e&&e.revoke()},SyncStart:I,SyncSetConfig:e=>{const t=U();if(t)return t.setUserConfig(e),t.checkSync()}}),browser.tabs.onUpdated.addListener((e,t)=>{var r;t.url&&(r=t.url,d.some(e=>{const t=p[e];return t.checkAuth&&t.checkAuth(r)}))&&browser.tabs.remove(e)})},64:(e,t,r)=>{"use strict";r.d(t,"a",()=>s),r.d(t,"b",()=>a);var o=r(15),n=r(9);const s="scriptTemplate",i=`${s}Edited`;function a(e={}){const t=Object(n.a)(s);let r=e[s];r||(r=t,e[s]=r,Object(n.d)(s,r));const o=r!==t;o!==e[i]&&(e[i]=o,Object(n.d)(i,o))}o.c.push(()=>{let e=Object(n.b)(i);if(e)return;const t=Object(n.b)(s);null==e?(e="// ==UserScript==\n// @name New Script\n// @namespace Violentmonkey Scripts\n// @match {{url}}\n// @grant none\n// ==/UserScript==\n"!==t,e?Object(n.d)(i,!0):a()):t!==Object(n.a)(s)&&a()})},65:(e,t,r)=>{"use strict";r.d(t,"b",()=>d),r.d(t,"a",()=>u);var o=r(0),n=r(1),s=r(18),i=r(7);const a={};let c,l={};function d(e){n.c.call(a,([t,r])=>{e in r&&(delete r[e],Object(o.o)(r)&&delete a[t])})}function u(e,t,r){r.forEach(r=>{Object(n.k)(a,[r,e,t],1)})}async function p(e){const t=Object.keys(e),r=await Object(s.i)(t);t.forEach(t=>{var o;(o=e[t],n.c).call(o,([e,{last:o}])=>{Object(n.k)(r,[t,e],o||void 0)})}),await Promise.all([Object(s.b)(r),h(f(e),{partial:!0})])}async function h(e,{partial:t}={}){const r=[];for(const[n,s]of Object.entries(e))for(const[e,i]of Object.entries(s))Object(o.o)(i)||(t&&(i.partial=!0),r.push(Object(o.x)(+n,"UpdatedValues",i,{frameId:+e})),20===r.length&&await Promise.all(r.splice(0)));await Promise.all(r)}function f(e){const t={};return n.c.call(e,([e,r])=>{var o;const s=Object.entries(r);(o=a[e],n.c).call(o,([r,o])=>{n.d.call(o,o=>{s.forEach(([s,i])=>{var a;i.last!==(null==(a=i[r])?void 0:a[o])&&Object(n.k)(t,[r,o,e,s],i.last)})})})}),t}function m(e){const t={};return n.c.call(e,([e,r])=>{var o;(o=a[e],n.c).call(o,([o,s])=>{n.d.call(s,s=>{Object(n.k)(t,[o,s,e],r)})})}),t}Object.assign(i.a,{GetValueStore:async e=>(await Object(s.i)([e]))[e]||{},async SetValueStores(e){const t=e.reduce((e,{where:t,store:r})=>{var o;const n=t.id||(null==(o=Object(s.e)(t))?void 0:o.props.id);return n&&(e[n]=r),e},{});await Promise.all([Object(s.b)(t),h(m(t))])},UpdateValue({id:e,key:t,value:r=null},s){Object(n.k)(l,[e,t,"last"],r),Object(n.k)(l,[e,t,s.tab.id,s.frameId],r),(async()=>{for(;!c;){c=!0,await 0;const e=l;if(l={},await p(e),c=!1,Object(o.o)(l))break}})()}}),browser.tabs.onRemoved.addListener(d),browser.tabs.onReplaced.addListener((e,t)=>d(t))},7:(e,t,r)=>{"use strict";r.d(t,"a",()=>n),r.d(t,"c",()=>s),r.d(t,"b",()=>i);var o=r(0);const n={};function s(e){browser.notifications.create(e.id||"ViolentMonkey",{type:"basic",iconUrl:o.d,title:`${e.title} - ${Object(o.m)("extName")}`,message:e.body,isClickable:e.isClickable})}async function i(e){const t=await browser.tabs.query({});let r=0;for(const o of t)e(o),r+=1,r%20==0&&await new Promise(setTimeout)}},73:function(e,t,r){"use strict";(e=>{r.d(t,"a",()=>j);var o=r(0),n=r(10),s=r(2),i=r(1),a=r(12),c=r(15),l=r(7),d=r(9),u=r(32);const p=(()=>{const t=browser.browserAction,r=()=>e.chrome.runtime.lastError;return Object(i.i)(t,["setIcon","setBadgeText","setBadgeBackgroundColor","setTitle"],e=>e?(e=>(...o)=>{try{e.call(t,...o,r)}catch(r){e.call(t,...o)}})(e):o.s)})(),h={};let f,m,b,g;const w=n.a.isChrome&&{};function j(e,{tab:t,frameId:r}){const o=t.id,n=h[o]||{};n.idMap&&0!==r||(n.total=0,n.unique=0,n.idMap={},h[o]=n),n.total+=e.length,e&&(e.forEach(e=>{n.idMap[e]=1}),n.unique=Object.keys(n.idMap).length),p.setBadgeBackgroundColor({color:n.blocked?"#888":"#808",tabId:o}),v(t,n)}function v(e,t=h[e.id]){t&&p.setBadgeText({text:`${t[m]||""}`,tabId:e.id})}function y(e,t=e.pendingUrl||e.url){const r=e.id,o=s.c.test(t),n=(o?Object(u.a)(t):void 0)&&b||!o&&g||"";if(n||(h[r]||{}).blocked){p.setTitle({title:n,tabId:r});const t=n?{blocked:!0}:{};h[r]=t,O(e,t),v(e,t)}}async function O(e={},t={}){const r=(t.blocked?"b":!f&&"w")||"",o={};for(const e of[16,19,32,38]){const t=`/public/images/icon${e}${r}.png`;let n=w?w[t]:t;n||(n=await k(t),w[t]=n),o[e]=n}p.setIcon({tabId:e.id,[w?"imageData":"path"]:o})}function k(e){return new Promise(t=>{const r=new Image;r.src=e,r.onload=()=>{const{width:e,height:o}=r,n=document.createElement("canvas"),s=n.getContext("2d");n.width=e,n.height=o,s.clearRect(0,0,e,o),s.drawImage(r,0,0,e,o),t(s.getImageData(0,0,e,o))}})}Object(d.c)(e=>{"isApplied"in e&&(f=e.isApplied,O(),Object(l.b)(O)),"showBadge"in e&&(m=e.showBadge,Object(l.b)(v)),"blacklist"in e&&Object(l.b)(y)}),c.c.push(()=>{f=Object(d.b)("isApplied"),m=Object(d.b)("showBadge"),b=Object(o.m)("failureReasonBlacklisted"),g=Object(o.m)("failureReasonNoninjectable"),Object(l.b)(y)}),browser.tabs.onRemoved.addListener(e=>{delete h[e]}),browser.tabs.onUpdated.addListener((e,t,r)=>{const{url:o}=t;if(o&&n.a.isFirefox){const t=a.a.pop(`badge:${e}${o}`);t&&j(...t)}("loading"===t.status||t.favIconUrl&&r.url.startsWith("about:"))&&y(r,o)})}).call(this,r(23))},84:function(e,t,r){"use strict";r.d(t,"a",()=>j);var o=r(3),n=r.n(o),s=r(0),i=r(2),a=r(10),c=r(12),l=r(18),d=r(15),u=r(9),p=r(7);const h={};function f(e){const t=+e.name;h[t]=1,Object(s.x)(t,"PopupShown",!0),e.onDisconnect.addListener(m),delete p.a.SetPopup}function m({name:e}){delete h[e],Object(s.x)(+e,"PopupShown",!1)}async function b(){const e=(await Object(s.i)()).id;Object(s.x)(e,"PopupShown",!0),p.a.SetPopup=async(e,t)=>{e.metas=p.a.GetMetas(e.ids),c.a.put("SetPopup",Object.assign({[t.frameId]:[e,t]},c.a.get("SetPopup")))}}d.c.push(()=>{browser.runtime.onConnect.addListener(f),browser.webRequest.onBeforeRequest.addListener(b,{urls:[browser.runtime.getURL(browser.runtime.getManifest().browser_action.default_popup)],types:["main_frame"]})});const g={urls:["*://*/*"],types:["main_frame","sub_frame"]};let w;function j(e,t,r){return c.a.pop(v(e,!r))||x(e,t,r,!0)}function v(e,t){return`preinject${+t}:${e}`}function y(e){const t=`${e?"add":"remove"}Listener`,r=e?g:void 0;browser.webRequest.onSendHeaders[t](O,r),browser.webRequest.onHeadersReceived[t](k,r)}function O({url:e,tabId:t,frameId:r}){if(!i.c.test(e))return;const o=v(e,!r);c.a.has(o)||c.a.put(o,x(e,t,r),1e4)}function k({url:e,frameId:t}){c.a.hit(v(e,!t),1e3)}async function x(e,t,r,o){const n=await Object(l.h)(e,!r),{inject:s}=n;return s.scripts.forEach(S,n),s.injectInto=w,s.ua=a.a,s.isFirefox=a.a.isFirefox,s.isPopupShown=h[t],!o&&browser.contentScripts&&((e,t,r)=>{e.registration=browser.contentScripts.register({allFrames:r,js:[{code:`${U}(${JSON.stringify(e.inject)})`}],matches:t.split("#",1),runAt:"document_start"})})(n,e,!!r),n}function S(e,t,r){var o;const{custom:l,meta:u,props:p}=e,{id:h}=p,{require:f,values:m}=this,b=this.code[h],g=Object(s.l)("VMin"),j=encodeURIComponent(u.name.replace(/[#&',/:;?@=]/g,$)),v=(l.injectInto||u.injectInto||w)===i.e,y=l.pathMap||{},O=null==(o=u.require)?void 0:o.map(e=>f[y[e]||e]).filter(Boolean),k=O?[].concat(...O.map(e=>[e,"\n;"])):[],x=k.length,S=[`window.${g}=function(${g}){try{with(this)((define,module,exports)=>{`,...k,x?"(()=>{":"",b,b.endsWith("\n")?"":"\n",x?"})()":"",`})()}catch(e){${g}(e)}};0`,`\n//# sourceURL=${d.a}${a.a.isFirefox?"%20":""}${j}.user.js#${h}`].join("");c.a.put(g,S,6e4),r[t]=n()({},e,{dataKey:g,code:v?"":S,metaStr:b.match(i.g)[1]||"",values:m[h]})}function $(e){return String.fromCharCode(e.charCodeAt(0)-32+65280)}Object(u.c)(e=>{var t;w=null!=(t=e.defaultInjectInto)?t:w,"isApplied"in e&&y(e.isApplied)}),d.c.push(()=>{w=Object(u.b)("defaultInjectInto"),y(Object(u.b)("isApplied"))});const U=`(${e=>{const{vmResolve:t}=window;t?t(e):window.vmData=e}})`},86:function(e,t,r){"use strict";r.r(t),(e=>{var t=r(0),o=r(2),n=r(1),s=r(10),i=r(61),a=r(16),c=r(12),l=r(18),d=r(73),u=r(15),p=r(9),h=r(84),f=r(64),m=r(65);let b;r(102),r(103),r(104),r(105),r(22),r(106),r(32),r(107);const g={},w={autoUpdate:O,expose(e){n.c.call(e,([e,t])=>{g[decodeURIComponent(e)]=t})},isApplied(e){b=e},[f.a](e,t){Object(f.b)(t)}};Object(p.c)(e=>{n.c.call(e,(function t([r,o]){const s=w[r];if(s)s(o,e);else if(r.includes(".")){var i;(i=Object(n.k)({},r,o),n.c).call(i,t)}})),Object(t.v)("UpdateOptions",e)}),Object.assign(a.a,{async GetData(e){const t=await Object(l.d)(e);return t.sync=i.a(),t},async GetInjected(e,t){const{frameId:r,tab:o,url:n}=t;r||Object(m.b)(o.id);const i={expose:!r&&n.startsWith("https://")&&g[n.split("/",3)[2]]};if(b){var l;const e=await Object(h.a)(n,o.id,r);Object(m.a)(o.id,r,e.withValueIds);const u=[e.enabledIds,t];Object(d.a)(...u),s.a.isFirefox&&c.a.put(`badge:${o.id}${n}`,u),Object.assign(i,e.inject),null==(l=e.registration)||l.then(e=>e.unregister());const p=i.scripts.map(e=>!e.code&&[e.dataKey,!0]).filter(Boolean);p.length&&Promise.resolve().then(()=>a.a.InjectionFeedback(p,t))}return i},InjectionFeedback(e,{tab:t,frameId:r}){e.forEach(([e,o])=>{const n=c.a.pop(e);o&&n&&browser.tabs.executeScript(t.id,{code:n,frameId:r,runAt:"document_start"})})}});const j=["MarkRemoved","Move","ParseScript","RemoveScript","UpdateScriptInfo"],v=["CheckRemove","CheckUpdate","CheckUpdateAll"];async function y(e,t){var r;const{cmd:o}=e,n=await(null==(r=a.a[o])?void 0:r.call(a.a,e.data,t));return(j.includes(o)||n&&v.includes(o))&&i.c(),null!=n?n:null}function O(){const e=(+Object(p.b)("autoUpdate")||0)*o.h;if(!e)return;let t=Date.now()-Object(p.b)("lastUpdate");t>=e&&(y({cmd:"CheckUpdateAll"}),t=0),clearTimeout(O.timer),O.timer=setTimeout(O,Math.min(o.j,e-t))}Object(u.b)(()=>{if(e.handleCommandMessage=y,e.deepCopy=n.a,browser.runtime.onMessage.addListener(s.a.isFirefox?(...e)=>y(...e).catch(e=>{throw e instanceof Error?e:new Error(e)}):y),["expose","isApplied"].forEach(e=>w[e](Object(p.b)(e))),setTimeout(O,2e4),i.b(),Object(l.a)(),setInterval(l.a,o.h),s.a.isChrome){const t=e.chrome.declarativeContent;t.onPageChanged.getRules(["inject"],e=>{e.length||t.onPageChanged.addRules([{id:"inject",conditions:[new t.PageStateMatcher({pageUrl:{urlContains:"://"}})],actions:[new t.RequestContentScript({js:browser.runtime.getManifest().content_scripts[0].js})]}])})}})}).call(this,r(23))},9:(e,t,r)=>{"use strict";r.d(t,"b",()=>h),r.d(t,"a",()=>f),r.d(t,"d",()=>m),r.d(t,"c",()=>b);var o=r(0),n=r(1),s=r(28),i=r(15),a=r(7);Object.assign(a.a,{GetAllOptions:()=>a.a.GetOptions(s.a),GetOptions:e=>n.f.call(e,([e])=>h(e)),SetOptions(e){Object(o.g)(e).forEach(e=>m(e.key,e.value))}});let c={};const l=Object(o.n)(),d=Object(o.c)(()=>{l.fire(c),c={}},100);let u={},p=browser.storage.local.get("options").then(({options:e})=>{e&&"object"==typeof e&&(u=e),Object(n.h)(u,"version")||m("version",1),p=null});function h(e,t){const r=Object(o.t)(e),i=r[0];let a=u[i];return null==a&&(a=s.a[i]),null==a&&(a=t),r.length>1?Object(n.h)(a,r.slice(1),t):a}function f(e){return Object(n.h)(s.a,e)}function m(e,t){if(p)return void p.then(()=>{m(e,t)});const r=Object(o.t)(e);r.join(".");let i=t;const a=r[0];a in s.a&&(r.length>1&&(i=Object(n.k)(h(a),r.slice(1),t)),u[a]=i,browser.storage.local.set({options:u}),((e,t)=>{const r=e.join(".");delete c[r],c[r]=t,d()})(r,t))}i.d.push(p);const b=l.hook}});