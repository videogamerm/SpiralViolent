(t=>{function e(e){for(var a,i,r=e[0],l=e[1],c=e[2],u=0,p=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);for(d&&d(e);p.length;)p.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==n[l]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},n={7:0},o=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=(t,e,s)=>{i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=(t,e)=>{if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,(e=>t[e]).bind(null,a));return s},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,"a",e),e},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.p="";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;o.push([177,1,2,0]),s()})([,,,,,,,,(t,e,s)=>{"use strict";s.d(e,"a",()=>a);const a={route:s(21).c}},,,,,,,,,,,,,,,,,,,,,,function(t,e,s){"use strict";var a=s(21),n=s(1),o=s(5),i=s(28),r=s(25),l={props:{name:String,json:Boolean,disabled:Boolean,hasSave:{type:Boolean,default:!0},hasReset:Boolean},data:()=>({value:null,savedValue:null}),computed:{parsedData(){let t,e;if(this.json)try{t=JSON.parse(this.value)}catch(t){e=t.message||t}else t=this.value;return{value:t,error:e}},isDirty(){return!Object(n.b)(this.parsedData.value,this.savedValue||"")},canSave(){return!this.parsedData.error&&this.isDirty},canReset(){return!Object(n.b)(this.parsedData.value,this.defaultValue||"")}},watch:{isDirty(t){this.toggleUnloadSentry(t)}},created(){const t=this.json?t=>JSON.stringify(t,null,"  "):t=>Array.isArray(t)?t.join("\n"):t||"";this.revoke=Object(r.a)(this.name,e=>{this.savedValue=e,this.value=t(e)}),this.defaultValue=Object(n.h)(i.a,this.name),this.toggleUnloadSentry=Object(a.a)(()=>{this.value=t(this.savedValue)})},beforeDestroy(){this.revoke(),this.toggleUnloadSentry(!1)},methods:{onChange(){!this.hasSave&&this.canSave&&this.onSave()},onSave(){o.a.set(this.name,this.parsedData.value),this.$emit("save")},onReset(){o.a.set(this.name,this.defaultValue)}}},c=s(4),d=Object(c.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"monospace-font",class:{"has-error":t.parsedData.error},attrs:{spellcheck:"false",disabled:t.disabled,title:t.parsedData.error},domProps:{value:t.value},on:{change:t.onChange,input:e=>{e.target.composing||(t.value=e.target.value)}}}),t._v(" "),t.hasSave?s("button",{attrs:{disabled:t.disabled||!t.canSave},domProps:{textContent:t._s(t.i18n("buttonSave"))},on:{click:t.onSave}}):t._e(),t.hasReset?s("button",{attrs:{disabled:t.disabled||!t.canReset},domProps:{textContent:t._s(t.i18n("buttonReset"))},on:{click:t.onReset}}):t._e(),t._t("default")],2)}),[],!1,null,null,null);e.a=d.exports},(t,e,s)=>{"use strict";var a=s(19);const n=Object(a.k)(async()=>(await("/public/lib/zip.js/zip.js",new Promise((t,e)=>{const s=document.createElement("script");s.src="/public/lib/zip.js/zip.js",s.onload=()=>t(),s.onerror=()=>e(),document.body.append(s)})),window.zip));e.a=n},,,,(t,e,s)=>{},function(t,e,s){"use strict";(function(t){var a=s(3),n=s.n(a),o=s(11),i=s.n(o),r=s(0),l=s(1),c=s(17),d=s(58),u=s(5),p=s(21),m=s(8),h=s(81),v=s(82),g=s(83);const f={name:"",runAt:"",homepageURL:"",updateURL:"",downloadURL:"",origInclude:!0,origExclude:!0,origMatch:!0,origExcludeMatch:!0},b=["include","match","exclude","excludeMatch"],y=t=>(null==t?void 0:t.join("\n"))||"",C=t=>t.split("\n").map(t=>t.trim()).filter(Boolean);let x,w;const _=()=>{u.a.get("editorWindow")&&u.a.set("editorWindowPos",{left:window.screenX,top:window.screenY,width:window.outerWidth,height:window.outerHeight})},k=({id:e,tabs:s})=>{if(1===s.length){const{onBoundsChanged:s}=t.chrome.windows;s?s.addListener(t=>{t.id===e&&_()}):(window.addEventListener("resize",Object(r.c)(_,100)),w=!0)}};let S;const P=(t,e)=>t<e?-1:t>e;e.a={props:["initial"],components:{VmCode:d.default,VmSettings:h.a,VmValues:v.a,VmHelp:g.a},data(){return{nav:"code",canSave:!1,script:null,code:"",codeDirty:!1,settings:{},commands:{save:this.save,close:this.close,showHelp:()=>{this.nav="help"}},hotkeys:null}},computed:{navItems(){var t,e;return n()({code:Object(r.m)("editNavCode"),settings:Object(r.m)("editNavSettings")},(null==(t=this.script)||null==(e=t.props)?void 0:e.id)&&{values:Object(r.m)("editNavValues")},{help:"?"})},scriptName(){const{custom:t,meta:e}=this.script||{},s=t&&t.name||e&&e.name;return m.a.title=s,s}},watch:{canSave(t){this.toggleUnloadSentry(t)},"initial.error"(t){t&&Object(c.b)({text:`${this.initial.message}\n\n${t}`})}},created(){var e;this.script=this.initial,this.toggleUnloadSentry=Object(p.a)(null,()=>{this.$refs.code.cm.focus()}),document.addEventListener("keydown",this.switchPanel),u.a.get("editorWindow")&&1===t.history.length&&(null==(e=browser.windows)||e.getCurrent({populate:!0}).then(k))},async mounted(){var t,e,s;this.nav="code";const a=null==(t=this.script)||null==(e=t.props)?void 0:e.id;if(a)this.code=await Object(r.v)("GetScriptCode",a);else{const{script:t,code:e}=await Object(r.v)("NewScript",p.c.paths[2]);this.script=t,this.code=e}const{custom:o,config:i}=this.script;this.settings={config:{notifyUpdates:`${null!=(s=i.notifyUpdates)?s:""}`,shouldUpdate:Boolean(i.shouldUpdate)},custom:n()({},f,{},Object(l.i)(o,Object.keys(f)),{},Object(l.i)(o,b,y),{runAt:o.runAt||""})},x=Object(l.a)(this.settings),this.$watch("codeDirty",this.onChange),this.$watch("settings",this.onChange,{deep:!0});{var c;const t=Object.values(this.navItems),e=[["Alt-PageUp",` ${t.join(" < ")}`],["Alt-PageDown",` ${t.join(" > ")}`],...Object.entries(this.$refs.code.expandKeyMap()).sort((t,e)=>P(t[1],e[1])||P(t[0],e[0]))];S=null==(c=e.find(([,t])=>"save"===t))?void 0:c[0],S||(S="Ctrl-S",e.unshift([S,"save"])),this.hotkeys=e}},methods:{async save(){w&&_();const{settings:t}=this,{config:e,custom:s}=t,{notifyUpdates:a}=e;try{var o,i,d;const c=this.$refs.code,u=null==(o=this.script)||null==(i=o.props)?void 0:i.id,p=await Object(r.v)("ParseScript",{id:u,code:c.getRealContent(),config:n()({},e,{notifyUpdates:a?+a:null}),custom:n()({},Object(l.i)(s,Object.keys(f)),{},Object(l.i)(s,b,C)),isNew:!u,message:""});x=Object(l.a)(t),c.cm.markClean(),this.codeDirty=!1,(null==p||null==(d=p.where)?void 0:d.id)&&(this.script=p.update)}catch(t){Object(c.b)({text:t})}},close(){this.$emit("close")},saveClose(){this.save().then(this.close)},switchPanel(t){const e=i.a.keyName(t);switch(e){case"Alt-PageUp":case"Alt-PageDown":{const t="Alt-PageDown"===e?1:-1,s=Object.keys(this.navItems);this.nav=s[(s.indexOf(this.nav)+t+s.length)%s.length];break}case S:this.canSave&&this.save(),t.preventDefault();break;case"Esc":this.nav="code"}},onChange(){this.canSave=this.codeDirty||!Object(l.b)(this.settings,x)}},beforeDestroy(){m.a.title=null,this.toggleUnloadSentry(!1),document.removeEventListener("keydown",this.switchPanel)}}}).call(this,s(23))},,,(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},function(t,e,s){"use strict";(function(t){var a=s(20),n=s.n(a),o=s(0),i=s(2),r=s(26),l=s(5),c=s(25),d=s(24),u=s(59),p=s(75),m=s(74),h=s(76),v=s(77),g=s(78),f=s(79),b=s(80);const y=[i.d,i.f,i.e],C=[{name:"showBadge",normalize:t=>t?"total"===t?"total":"unique":""},{name:"autoUpdate",normalize:t=>Math.max(0,Math.min(365,+t||0))},{name:"defaultInjectInto",normalize:t=>y.includes(t)?t:"auto"},{name:"filtersPopup.sort",normalize:t=>"exec"===t&&t||"alpha"}],x={};C.forEach(({name:t})=>{x[t]=null}),e.a={components:{Icon:d.a,VmImport:p.a,VmExport:m.a,VmSync:h.a,VmEditor:v.a,VmTemplate:g.a,VmBlacklist:f.a,VmCss:b.a,SettingCheck:r.a,LocaleGroup:u.a,Tooltip:n()},data:()=>({showAdvanced:!1,expose:null,settings:x,injectIntoOptions:y}),computed:{editorWindowHint(){var e;return(null==(e=t.chrome.windows)?void 0:e.onBoundsChanged)?null:this.i18n("optionEditorWindowHint")}},methods:{getUpdater:({name:t,normalize:e})=>(s,a)=>{(s=e(s))!==(a=e(a))&&l.a.set(t,s)}},created(){this.revokers=[],C.forEach(t=>{const{name:e,normalize:s}=t;this.revokers.push(Object(c.a)(e,t=>{x[e]=s(t)})),this.$watch(()=>x[e],Object(o.c)(this.getUpdater(t),300))}),this.expose=Object.keys(l.a.get("expose")).map(t=>[t,decodeURIComponent(t)])},beforeDestroy(){this.revokers.forEach(t=>{t()})}}}).call(this,s(23))},(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},,,,,,,,function(t,e,s){"use strict";var a=s(0),n={props:["i18nKey"],computed:{parts(){return Object(a.m)(this.i18nKey,["\x02"]).split("\x02")}}},o=s(4),i=Object(o.a)(n,(function(){var t=this.$createElement;return(this._self._c||t)("span",[this._v(" "+this._s(this.parts[0])+" "),this._t("default"),this._v(" "+this._s(this.parts[1])+" ")],2)}),[],!1,null,null,null);e.a=i.exports},,,,,,,,,,,,,,,function(t,e,s){"use strict";var a=s(55),n=s.n(a),o=s(0),i=s(1),r=s(5),l=s(10),c=s(26);var d=s(31),u=s(8);function p(t,e,s="0"){let a=`${t}`;for(;a.length<e;)a=s+a;return a}function m(){return`scripts_${(()=>{const t=new Date;return`${t.getFullYear()}-${p(t.getMonth()+1,2)}-${p(t.getDate(),2)}_${p(t.getHours(),2)}.${p(t.getMinutes(),2)}.${p(t.getSeconds(),2)}`})()}.zip`}function h(t){if(l.a.isFirefox){const e=new FileReader;e.onload=()=>{u.a.ffDownload={name:m(),url:e.result}},e.readAsDataURL(t)}else!function(t,e,s){const a=URL.createObjectURL(t);((t,e,s)=>{const a=document.createElement("a");a.style.display="none",document.body.appendChild(a),a.href=t,e&&(a.download=e),a.click(),setTimeout(()=>{document.body.removeChild(a),s&&s()},3e3)})(a,e,()=>{URL.revokeObjectURL(a),s&&s()})}(t,m())}l.a.isFirefox&&(u.a.ffDownload={});var v={components:{SettingCheck:c.a,Modal:n.a},data:()=>({store:u.a,exporting:!1}),methods:{exportData(){this.exporting=!0,Promise.resolve((()=>{const t=r.a.get("exportValues");return Object(o.v)("ExportZip",{values:t}).then(e=>{const s={},a={scripts:{},settings:r.a.get()};delete a.settings.sync,t&&(a.values={});const n=(Object(i.h)(e,"items")||[]).map(({script:n,code:o})=>{let i=(t=>t.replace(/[\\/:*?"<>|]/g,"-"))(n.custom.name||n.meta.name||n.props.id);s[i]?(s[i]+=1,i=`${i}_${s[i]}`):s[i]=1;const{lastModified:r,lastUpdated:l}=n.props,c={custom:n.custom,config:n.config,position:n.props.position,lastModified:r,lastUpdated:l};if(t){const t=e.values[n.props.id];t&&(a.values[n.props.uri]=t)}return a.scripts[i]=c,{name:`${i}.user.js`,content:o,lastModDate:new Date(l||r)}});return n.push({name:"violentmonkey",content:JSON.stringify(a)}),n}).then(t=>t.reduce((t,e)=>t.then(t=>((t,e)=>Object(d.a)().then(s=>new Promise(a=>{t.add(e.name,new s.TextReader(e.content),()=>a(t),null,{lastModDate:e.lastModDate})})))(t,e)),Object(d.a)().then(t=>new Promise(e=>{t.createWriter(new t.BlobWriter("application/octet-stream"),t=>{e(t)})})))).then(t=>new Promise(e=>{t.close(t=>{e(t)})}))})()).then(h).catch(t=>{console.error(t)}).then(()=>{this.exporting=!1})},getName:t=>t.script.custom.name||Object(o.k)(t.script.meta,"name")}},g=(s(168),s(4)),f=Object(g.a)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelDataExport"))}}),s("button",{attrs:{disabled:t.exporting},domProps:{textContent:t._s(t.i18n("buttonExportData"))},on:{click:t.exportData}}),s("div",{staticClass:"mt-1"},[s("label",[s("setting-check",{attrs:{name:"exportValues"}}),s("span",{domProps:{textContent:t._s(t.i18n("labelExportScriptData"))}})],1)]),t.store.ffDownload?s("modal",{attrs:{transition:"in-out",visible:!!t.store.ffDownload.url},on:{close:e=>{t.store.ffDownload={}}}},[s("div",{staticClass:"export-modal modal-content"},[s("a",{attrs:{download:t.store.ffDownload.name,href:t.store.ffDownload.url}},[t._v(" Right click and save as"),s("br"),s("strong",[t._v("scripts.zip")])])])]):t._e()],1)}),[],!1,null,null,null);e.a=f.exports},function(t,e,s){"use strict";var a=s(3),n=s.n(a),o=s(0),i=s(5),r=s(26),l=s(31),c=s(17);const d=[];async function u(t){if(!t)return;d.length=0;const e=await Object(l.a)(),s=await new Promise((s,a)=>{e.createReader(new e.BlobReader(t),t=>t.getEntries(s),a)}).catch(v)||[];if(d.length)return;v("",t.name,"info");const a={},r=s.reduce((t,e)=>{var s;return t+(null==(s=e.filename)?void 0:s.endsWith(".user.js"))},0),u=s.find(t=>{var e;return"violentmonkey"===(null==(e=t.filename)?void 0:e.toLowerCase())}),p=await h(u)||{};function m(t,e){return Promise.all(s.map(async s=>{const{filename:a}=s;if(null==a?void 0:a.endsWith(e)){const n=await h(s);return n&&t(s,n,a.slice(0,-e.length))}}))}function h(t){return t&&new Promise(s=>{t.getData(new e.TextWriter,e=>{s(t.filename.endsWith(".js")?e:((t,e)=>{try{return JSON.parse(t)}catch(t){v(t,e.filename,null)}})(e,t))})})}function v(t,e,s="critical"){d.push({text:t,name:e,type:s})}function g(t=""){const e=Object.keys(a).length,s=Object(o.m)("msgImported",[e===r?e:`${e} / ${r}`]);return d[0].name=s,d[0].text=t,s}function f(t,e){return Object.entries(t||{}).map(e).filter(Boolean)}function b(t){return Object(o.g)(t).filter(t=>"string"==typeof t)}p.scripts||(p.scripts={}),p.values||(p.values={}),await m(async(t,e,s)=>{const{meta:a,settings:n={},options:o}=e;if(!a||!o)return;const i=o.override||{};d[0].text="Tampermonkey",p.scripts[s]={config:{enabled:!1!==n.enabled?1:0,shouldUpdate:o.check_for_updates?1:0},custom:{downloadURL:"string"==typeof a.file_url?a.file_url:void 0,noframes:!!i.noframes||null==i.noframes&&void 0,runAt:/^document-(start|end|idle)$/.test(o.run_at)?o.run_at:void 0,exclude:b(i.use_excludes),include:b(i.use_includes),match:b(i.use_matches),origExclude:!1!==i.merge_excludes,origInclude:!1!==i.merge_includes,origMatch:!1!==i.merge_matches},position:+n.position||void 0,props:{lastModified:+a.modified,lastUpdated:+a.modified}}},".options.json"),await m(async(t,e,s)=>{var i,r;const{filename:l}=t,c=p.scripts[s],d=n()({code:e},c&&{custom:c.custom,config:n()({enabled:null!=(i=c.enabled)?i:1,shouldUpdate:null!=(r=c.update)?r:1},c.config),position:c.position,props:{lastModified:c.lastModified||+t.lastModDate,lastUpdated:c.lastUpdated||+t.lastModDate}});try{a[s]=(await Object(o.v)("ParseScript",d)).update.props.uri,g(l)}catch(t){v(t,l,"script")}},".user.js"),await m(async(t,e,s)=>{d[0].text="Tampermonkey",p.values[a[s]]=e.data},".storage.json"),i.a.get("importSettings")&&Object(o.v)("SetOptions",f(p.settings,([t,e])=>"sync"!==t&&{key:t,value:e})),Object(o.v)("SetValueStores",f(p.values,([t,e])=>e&&{where:{uri:t},store:e})),Object(o.v)("CheckPosition"),Object(c.b)({text:g()})}var p={components:{SettingCheck:r.a},data(){return{reports:d,vacuuming:!1,labelVacuum:this.i18n("buttonVacuum")}},methods:{pickBackup(){const t=document.createElement("input");t.type="file",t.accept=".zip",t.onchange=()=>{var e;return u(null==(e=t.files)?void 0:e[0])},t.click()},async vacuum(){this.vacuuming=!0,this.labelVacuum=this.i18n("buttonVacuuming"),await Object(o.v)("Vacuum"),this.vacuuming=!1,this.labelVacuum=this.i18n("buttonVacuumed")}},mounted(){const t=(t=>{let e;const s=e=>t.classList.toggle("drop-allowed",e),a=()=>s(!1),n=()=>{clearTimeout(e),e=setTimeout(a,250)},i=t=>{clearTimeout(e);const a=t.dataTransfer.types.includes("Files");a&&t.preventDefault(),s(a)},r=async e=>{e.preventDefault(),s(!1);try{const s=e.dataTransfer.files[0];await Object(c.a)(Object(o.m)("buttonImportData")),t.disabled=!0,await u(s),t.disabled=!1}catch(t){}};return()=>{var t;const e="#settings"===window.location.hash,s=document[`${e?"add":"remove"}EventListener`];(t=document,s).call(t,"dragend",a),(t=document,s).call(t,"dragleave",n),(t=document,s).call(t,"dragover",i),(t=document,s).call(t,"drop",r)}})(this.$refs.buttonImport);window.addEventListener("hashchange",t),t()}},m=(s(167),s(4)),h=Object(m.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelDataImport"))}}),s("button",{ref:"buttonImport",domProps:{textContent:t._s(t.i18n("buttonImportData"))},on:{click:t.pickBackup}}),s("button",{attrs:{title:t.i18n("hintVacuum"),disabled:t.vacuuming},domProps:{textContent:t._s(t.labelVacuum)},on:{click:t.vacuum}}),s("div",{staticClass:"mt-1"},[s("label",[s("setting-check",{attrs:{name:"importSettings"}}),s("span",{domProps:{textContent:t._s(t.i18n("labelImportSettings"))}})],1)]),s("table",{staticClass:"import-report"},t._l(t.reports,(e,a)=>{var n=e.type,o=e.name,i=e.text;return s("tr",{key:a,attrs:{"data-type":n}},[o?s("td",{domProps:{textContent:t._s(o)}}):t._e(),s("td",{attrs:{colspan:o?null:2},domProps:{textContent:t._s(i)}})])}),0)])}),[],!1,null,null,null);e.a=h.exports},function(t,e,s){"use strict";var a=s(0),n=s(5),o=s(26),i=s(25),r=s(24),l=s(8);const c={current:""};Object(i.a)("sync.current",t=>{c.current=t||""});var d={components:{SettingCheck:o.a,Icon:r.a},data:()=>({syncConfig:c,store:l.a}),computed:{syncServices(){const t=this.store.sync;return t&&t.length?[{displayName:this.i18n("labelSyncDisabled"),name:"",properties:{}},...t]:null},service(){if(this.syncServices){const t=this.syncConfig.current||"";let e=this.syncServices.find(e=>e.name===t);return e||(console.warn("Invalid current service:",t),e=this.syncServices[0]),e}return null},state(){const{service:t}=this;if(t){const e=["unauthorized","error","authorized"].includes(t.authState)&&["idle","error"].includes(t.syncState),s=e&&"authorized"===t.authState;return{message:this.getMessage(),label:this.getLabel(),canAuthorize:e,canSync:s,authType:t.properties.authType,userConfig:t.userConfig||{}}}return null}},methods:{onSaveUserConfig(){Object(a.v)("SyncSetConfig",this.state.userConfig).catch(a.s)},onSyncChange(t){const{value:e}=t.target;n.a.set("sync.current",e)},onAuthorize(){const{service:t}=this;["authorized"].includes(t.authState)?Object(a.v)("SyncRevoke"):["unauthorized","error"].includes(t.authState)&&Object(a.v)("SyncAuthorize")},onSync(){Object(a.v)("SyncStart")},getMessage(){const{service:t}=this;if("initializing"===t.authState)return this.i18n("msgSyncInit");if("error"===t.authState)return this.i18n("msgSyncInitError");if("unauthorized"===t.authState)return this.i18n("msgSyncInitError");if("error"===t.syncState)return this.i18n("msgSyncError");if("ready"===t.syncState)return this.i18n("msgSyncReady");if("syncing"===t.syncState){let e="";return t.progress&&t.progress.total&&(e=` (${t.progress.finished}/${t.progress.total})`),this.i18n("msgSyncing")+e}if(t.lastSync){const e=new Date(t.lastSync).toLocaleString();return this.i18n("lastSync",e)}},getLabel(){const{service:t}=this;return"authorizing"===t.authState?this.i18n("labelSyncAuthorizing"):"authorized"===t.authState?this.i18n("labelSyncRevoke"):this.i18n("labelSyncAuthorize")}}},u=(s(169),s(4)),p=Object(u.a)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelSync"))}}),t.state?s("div",[s("span",{domProps:{textContent:t._s(t.i18n("labelSyncService"))}}),s("select",{staticClass:"mx-1",domProps:{value:t.syncConfig.current},on:{change:t.onSyncChange}},t._l(t.syncServices,e=>s("option",{key:e.name,domProps:{value:e.name,textContent:t._s(e.displayName)}})),0),t.service.name&&"oauth"===t.state.authType?s("button",{attrs:{disabled:!t.state.canAuthorize},domProps:{textContent:t._s(t.state.label)},on:{click:t.onAuthorize}}):t._e(),t.service.name?s("button",{attrs:{disabled:!t.state.canSync},on:{click:t.onSync}},[s("icon",{attrs:{name:"refresh"}})],1):t._e()]):t._e(),t.state?s("p",{staticClass:"mt-1",domProps:{textContent:t._s(t.state.message)}}):t._e(),t.state&&"password"===t.state.authType?s("fieldset",{staticClass:"mt-1"},[s("label",{staticClass:"sync-server-url"},[s("span",{domProps:{textContent:t._s(t.i18n("labelSyncServerUrl"))}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.serverUrl,expression:"state.userConfig.serverUrl"}],attrs:{type:"text",disabled:!t.state.canAuthorize||t.state.userConfig.anonymous},domProps:{value:t.state.userConfig.serverUrl},on:{input:e=>{e.target.composing||t.$set(t.state.userConfig,"serverUrl",e.target.value)}}})]),s("div",{staticClass:"mt-1"},[s("label",{staticClass:"mr-2"},[s("span",{domProps:{textContent:t._s(t.i18n("labelSyncUsername"))}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.username,expression:"state.userConfig.username"}],attrs:{type:"text",disabled:!t.state.canAuthorize||t.state.userConfig.anonymous},domProps:{value:t.state.userConfig.username},on:{input:e=>{e.target.composing||t.$set(t.state.userConfig,"username",e.target.value)}}})]),s("label",{staticClass:"inline-block mr-2"},[s("span",{domProps:{textContent:t._s(t.i18n("labelSyncPassword"))}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.password,expression:"state.userConfig.password"}],attrs:{type:"password",disabled:!t.state.canAuthorize||t.state.userConfig.anonymous},domProps:{value:t.state.userConfig.password},on:{input:e=>{e.target.composing||t.$set(t.state.userConfig,"password",e.target.value)}}})]),s("label",{staticClass:"mr-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.anonymous,expression:"state.userConfig.anonymous"}],attrs:{type:"checkbox",disabled:!t.state.canAuthorize},domProps:{checked:Array.isArray(t.state.userConfig.anonymous)?t._i(t.state.userConfig.anonymous,null)>-1:t.state.userConfig.anonymous},on:{change:e=>{var s=t.state.userConfig.anonymous,a=e.target,n=!!a.checked;if(Array.isArray(s)){var o=t._i(s,null);a.checked?o<0&&t.$set(t.state.userConfig,"anonymous",s.concat([null])):o>-1&&t.$set(t.state.userConfig,"anonymous",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.state.userConfig,"anonymous",n)}}}),s("span",{domProps:{textContent:t._s(t.i18n("labelSyncAnonymous"))}})])]),s("div",{staticClass:"mt-1"},[s("button",{attrs:{disabled:!t.state.canAuthorize},domProps:{textContent:t._s(t.i18n("buttonSave"))},on:{click:e=>(e.preventDefault(),t.onSaveUserConfig(e))}})])]):t._e(),s("div",{staticClass:"mt-1"},[s("label",[s("setting-check",{attrs:{name:"syncScriptStatus"}}),s("span",{domProps:{textContent:t._s(t.i18n("labelSyncScriptStatus"))}})],1)])])}),[],!1,null,null,null);e.a=p.exports},function(t,e,s){"use strict";var a=s(3),n=s.n(a),o=s(5),i=s(17),r={data:()=>({hint:null}),components:{SettingText:s(30).a},mounted(){this.$refs.editor.$el.addEventListener("dblclick",this.toggleBoolean)},methods:{onSave(){Object(i.b)({text:this.$refs.editor.error||this.i18n("msgSavedEditorOptions")})},toggleBoolean(t){const e=t.target,{selectionStart:s,selectionEnd:a,value:n}=e,o={false:"true",true:"false"}[n.slice(s,a)];o&&!document.execCommand("insertText",!1,o)&&(e.value=n.slice(0,s)+o+n.slice(a),e.setSelectionRange(s+o.length,s+o.length),e.dispatchEvent(new Event("input")),e.onblur=()=>e.dispatchEvent(new Event("change")))},async toggleStateHint(){if(this.hint)return void(this.hint=null);const t=["mode","value","configureMouse","lineNumberFormatter","specialCharPlaceholder"],e={};Object.entries(n()({},(await Promise.resolve().then(s.t.bind(null,11,7))).defaults,{},(await Promise.resolve().then(s.bind(null,58))).cmOptions,{},o.a.get("editor"))).sort(([t],[e])=>t<e?-1:t>e).filter(([e,s])=>!t.includes(e)&&"function"!=typeof s).forEach(([t,s])=>{e[t]=s}),this.hint=JSON.stringify(e,null,"  "),setTimeout(()=>{this.$el.getBoundingClientRect().bottom>window.innerHeight&&this.$el.scrollIntoView({behavior:"smooth"})})}}},l=(s(170),s(4)),c=Object(l.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelEditor"))}}),s("p",{domProps:{innerHTML:t._s(t.i18n("descEditorOptions"))}}),s("setting-text",{ref:"editor",attrs:{name:"editor",json:!0,"has-reset":!0},on:{save:t.onSave}},[s("button",{domProps:{textContent:t._s(t.i18n("buttonShowEditorState"))},on:{click:t.toggleStateHint}})]),s("pre",{staticClass:"monospace-font dim-hint",domProps:{textContent:t._s(t.hint)}})],1)}),[],!1,null,null,null);e.a=c.exports},function(t,e,s){"use strict";var a=s(17),n={components:{SettingText:s(30).a},methods:{onSave(){Object(a.b)({text:this.i18n("msgSavedScriptTemplate")})}}},o=s(4),i=Object(o.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",[e("h3",{domProps:{textContent:this._s(this.i18n("labelScriptTemplate"))}}),e("setting-text",{attrs:{name:"scriptTemplate"},on:{save:this.onSave}})],1)}),[],!1,null,null,null);e.a=i.exports},function(t,e,s){"use strict";var a=s(0),n=s(17),o={components:{SettingText:s(30).a},methods:{onSave(){Object(n.b)({text:this.i18n("msgSavedBlacklist")}),Object(a.v)("BlacklistReset")}}},i=s(4),r=Object(i.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelBlacklist"))}}),s("p",[t._v(" "+t._s(t.i18n("descBlacklist"))+" "),s("a",{attrs:{href:"https://violentmonkey.github.io/posts/smart-rules-for-blacklist/#blacklist-patterns",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("learnBlacklist"))}})]),s("setting-text",{attrs:{name:"blacklist"},on:{save:t.onSave}})],1)}),[],!1,null,null,null);e.a=r.exports},function(t,e,s){"use strict";var a=s(17),n={components:{SettingText:s(30).a},methods:{onSave(){Object(a.b)({text:this.i18n("msgSavedCustomCSS")})}}},o=s(4),i=Object(o.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",[e("h3",{domProps:{textContent:this._s(this.i18n("labelCustomCSS"))}}),e("p",{domProps:{innerHTML:this._s(this.i18n("descCustomCSS"))}}),e("setting-text",{attrs:{name:"customCSS"},on:{save:this.onSave}})],1)}),[],!1,null,null,null);e.a=i.exports},function(t,e,s){"use strict";var a=s(20),n=s.n(a),o=s(0),i=s(1),r={props:["active","settings","value"],components:{Tooltip:n.a},computed:{custom(){return this.settings.custom||{}},config(){return this.settings.config||{}},placeholders(){const{value:t}=this;return{name:Object(i.h)(t,"meta.name"),homepageURL:Object(i.h)(t,"meta.homepageURL"),updateURL:Object(i.h)(t,"meta.updateURL")||Object(o.m)("hintUseDownloadURL"),downloadURL:Object(i.h)(t,"meta.downloadURL")||Object(i.h)(t,"custom.lastInstallURL")}}},watch:{active(t){t&&this.$refs.container.querySelector("input").focus()}}},l=(s(162),s(4)),c=Object(l.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"container",staticClass:"edit-settings"},[s("h4",{domProps:{textContent:t._s(t.i18n("editLabelSettings"))}}),s("div",{staticClass:"form-group"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.shouldUpdate,expression:"config.shouldUpdate"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.config.shouldUpdate)?t._i(t.config.shouldUpdate,null)>-1:t.config.shouldUpdate},on:{change:e=>{var s=t.config.shouldUpdate,a=e.target,n=!!a.checked;if(Array.isArray(s)){var o=t._i(s,null);a.checked?o<0&&t.$set(t.config,"shouldUpdate",s.concat([null])):o>-1&&t.$set(t.config,"shouldUpdate",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.config,"shouldUpdate",n)}}}),s("span",{domProps:{textContent:t._s(t.i18n("labelAllowUpdate"))}})]),s("span",{domProps:{textContent:t._s(t.i18n("labelNotifyThisUpdated"))}}),t._l([[t.i18n("genericOn"),"1"],[t.i18n("genericOff"),"0"],[t.i18n("genericUseGlobal"),""]],e=>{var a=e[0],n=e[1];return s("label",{key:n,staticClass:"ml-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.notifyUpdates,expression:"config.notifyUpdates"}],attrs:{type:"radio"},domProps:{value:n,checked:t._q(t.config.notifyUpdates,n)},on:{change:e=>t.$set(t.config,"notifyUpdates",n)}}),t._v(" "),s("span",{domProps:{textContent:t._s(a)}})])})],2),s("h4",{domProps:{textContent:t._s(t.i18n("editLabelMeta"))}}),s("div",{staticClass:"form-group flex"},[s("label",{staticClass:"label",domProps:{textContent:t._s(t.i18n("labelName"))}}),s("tooltip",{attrs:{content:"@name",placement:"right"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.name,expression:"custom.name"}],attrs:{type:"text",placeholder:t.placeholders.name},domProps:{value:t.custom.name},on:{input:e=>{e.target.composing||t.$set(t.custom,"name",e.target.value)}}})])],1),s("div",{staticClass:"form-group flex"},[s("label",{staticClass:"label",domProps:{textContent:t._s(t.i18n("labelRunAt"))}}),s("tooltip",{attrs:{content:"@run-at",placement:"right"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.custom.runAt,expression:"custom.runAt"}],on:{change:e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.custom,"runAt",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""},domProps:{textContent:t._s(t.i18n("labelRunAtDefault"))}}),s("option",{attrs:{value:"document-start"}},[t._v("document-start")]),s("option",{attrs:{value:"document-end"}},[t._v("document-end")]),s("option",{attrs:{value:"document-idle"}},[t._v("document-idle")])])])],1),s("div",{staticClass:"form-group flex"},[s("label",{staticClass:"label",domProps:{textContent:t._s(t.i18n("labelHomepageURL"))}}),s("tooltip",{attrs:{content:"@homepageURL",placement:"right"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.homepageURL,expression:"custom.homepageURL"}],attrs:{type:"text",placeholder:t.placeholders.homepageURL},domProps:{value:t.custom.homepageURL},on:{input:e=>{e.target.composing||t.$set(t.custom,"homepageURL",e.target.value)}}})])],1),s("div",{staticClass:"form-group flex"},[s("label",{staticClass:"label",domProps:{textContent:t._s(t.i18n("labelUpdateURL"))}}),s("tooltip",{attrs:{content:"@updateURL",placement:"right"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.updateURL,expression:"custom.updateURL"}],attrs:{type:"text",placeholder:t.placeholders.updateURL},domProps:{value:t.custom.updateURL},on:{input:e=>{e.target.composing||t.$set(t.custom,"updateURL",e.target.value)}}})])],1),s("div",{staticClass:"form-group flex"},[s("label",{staticClass:"label",domProps:{textContent:t._s(t.i18n("labelDownloadURL"))}}),s("tooltip",{attrs:{content:"@downloadURL",placement:"right"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.downloadURL,expression:"custom.downloadURL"}],attrs:{type:"text",placeholder:t.placeholders.downloadURL},domProps:{value:t.custom.downloadURL},on:{input:e=>{e.target.composing||t.$set(t.custom,"downloadURL",e.target.value)}}})])],1),s("tooltip",{staticClass:"form-group",attrs:{content:"@include",placement:"right"}},[s("div",{staticClass:"flex"},[s("span",{staticClass:"flex-auto",domProps:{textContent:t._s(t.i18n("labelInclude"))}}),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.origInclude,expression:"custom.origInclude"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.custom.origInclude)?t._i(t.custom.origInclude,null)>-1:t.custom.origInclude},on:{change:e=>{var s=t.custom.origInclude,a=e.target,n=!!a.checked;if(Array.isArray(s)){var o=t._i(s,null);a.checked?o<0&&t.$set(t.custom,"origInclude",s.concat([null])):o>-1&&t.$set(t.custom,"origInclude",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.custom,"origInclude",n)}}}),s("span",{domProps:{textContent:t._s(t.i18n("labelKeepOriginal"))}})])]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.custom.include,expression:"custom.include"}],domProps:{value:t.custom.include},on:{input:e=>{e.target.composing||t.$set(t.custom,"include",e.target.value)}}})]),s("tooltip",{staticClass:"form-group",attrs:{content:"@match",placement:"right"}},[s("div",{staticClass:"flex"},[s("span",{staticClass:"flex-auto",domProps:{textContent:t._s(t.i18n("labelMatch"))}}),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.origMatch,expression:"custom.origMatch"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.custom.origMatch)?t._i(t.custom.origMatch,null)>-1:t.custom.origMatch},on:{change:e=>{var s=t.custom.origMatch,a=e.target,n=!!a.checked;if(Array.isArray(s)){var o=t._i(s,null);a.checked?o<0&&t.$set(t.custom,"origMatch",s.concat([null])):o>-1&&t.$set(t.custom,"origMatch",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.custom,"origMatch",n)}}}),s("span",{domProps:{textContent:t._s(t.i18n("labelKeepOriginal"))}})])]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.custom.match,expression:"custom.match"}],domProps:{value:t.custom.match},on:{input:e=>{e.target.composing||t.$set(t.custom,"match",e.target.value)}}})]),s("tooltip",{staticClass:"form-group",attrs:{content:"@exclude",placement:"right"}},[s("div",{staticClass:"flex"},[s("span",{staticClass:"flex-auto",domProps:{textContent:t._s(t.i18n("labelExclude"))}}),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.origExclude,expression:"custom.origExclude"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.custom.origExclude)?t._i(t.custom.origExclude,null)>-1:t.custom.origExclude},on:{change:e=>{var s=t.custom.origExclude,a=e.target,n=!!a.checked;if(Array.isArray(s)){var o=t._i(s,null);a.checked?o<0&&t.$set(t.custom,"origExclude",s.concat([null])):o>-1&&t.$set(t.custom,"origExclude",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.custom,"origExclude",n)}}}),s("span",{domProps:{textContent:t._s(t.i18n("labelKeepOriginal"))}})])]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.custom.exclude,expression:"custom.exclude"}],domProps:{value:t.custom.exclude},on:{input:e=>{e.target.composing||t.$set(t.custom,"exclude",e.target.value)}}})]),s("tooltip",{staticClass:"form-group",attrs:{content:"@exclude-match",placement:"right"}},[s("div",{staticClass:"flex"},[s("span",{staticClass:"flex-auto",domProps:{textContent:t._s(t.i18n("labelExcludeMatch"))}}),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.origExcludeMatch,expression:"custom.origExcludeMatch"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.custom.origExcludeMatch)?t._i(t.custom.origExcludeMatch,null)>-1:t.custom.origExcludeMatch},on:{change:e=>{var s=t.custom.origExcludeMatch,a=e.target,n=!!a.checked;if(Array.isArray(s)){var o=t._i(s,null);a.checked?o<0&&t.$set(t.custom,"origExcludeMatch",s.concat([null])):o>-1&&t.$set(t.custom,"origExcludeMatch",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.custom,"origExcludeMatch",n)}}}),s("span",{domProps:{textContent:t._s(t.i18n("labelKeepOriginal"))}})])]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.custom.excludeMatch,expression:"custom.excludeMatch"}],domProps:{value:t.custom.excludeMatch},on:{input:e=>{e.target.composing||t.$set(t.custom,"excludeMatch",e.target.value)}}})])],1)}),[],!1,null,null,null);e.a=c.exports},function(t,e,s){"use strict";var a=s(20),n=s.n(a),o=s(0),i=s(1),r=s(24),l=s(6),c=s(17);let d,u;var p={props:["active","script"],components:{Icon:r.a,Tooltip:n.a},data:()=>({current:null,keys:null,page:null,values:null}),computed:{totalPages(){var t;return Math.ceil((null==(t=this.keys)?void 0:t.length)/25)||0},pageKeys(){var t;const e=25*(this.page-1);return null==(t=this.keys)?void 0:t.slice(e,e+25)}},watch:{active(t){var e;t&&(l.a.value.getOne(this.script.props.id).then(this.setData),d=l.a.value.prefix+(null==(e=this.script)?void 0:e.props.id),(u||this.$refs.container.querySelector("button")).focus()),browser.storage.onChanged[`${t?"add":"remove"}Listener`](this.onStorageChanged)},current(t,e){if(t)u=document.activeElement,this.$nextTick(()=>{const e=this.$refs[t.isNew?"key":"value"];e.setSelectionRange(0,0),e.focus()});else if(e){var s;null==(s=u)||s.focus()}}},methods:{getValue(t,e){let s=this.values[t];const a=s[0];return s=s.slice(1),"s"===a?s=JSON.stringify(s):e||(s=(t=>{try{return JSON.stringify(JSON.parse(t),null,"  ")}catch(e){return t}})(s)),e&&s.length>1024&&(s=s.slice(0,1024)),s},setData(t={}){this.values=t,this.keys=Object.keys(t).sort(),this.page=Math.min(this.page,this.totalPages)||1},updateValue({key:t,jsonValue:e,isNew:s}){const a=Object(o.e)(e)||"",{id:n}=this.script.props;return Object(o.v)("UpdateValue",{id:n,key:t,value:a}).then(()=>{if(a)this.$set(this.values,t,a),s&&this.keys.push(t);else{const e=this.keys.indexOf(t);e>=0&&this.keys.splice(e,1),this.$delete(this.values,t)}})},onNew(){this.current={isNew:!0,key:"",value:""}},onRemove(t){this.updateValue({key:t}).then(()=>{this.current&&this.current.key===t&&(this.current=null)})},onEdit(t){this.current={isNew:!1,key:t,value:this.getValue(t)}},onEditAll(){this.current={isAll:!0,value:`{\n  ${this.keys.map(t=>`${JSON.stringify(t)}: ${this.getValue(t)}`).join(",\n").replace(/\n/g,"\n  ")}\n}`}},async onSave(){const{current:t}=this;if(t.jsonPaused&&(t.jsonPaused=!1,this.onChange()),t.error){const e=+t.error.match(/position\s+(\d+)|$/)[1]||0;return this.$refs.value.setSelectionRange(e,e+1),this.$refs.value.focus(),void Object(c.b)({text:t.error})}var e;this.current=null,t.isAll?await Object(o.v)("SetValueStores",[{where:{id:this.script.props.id},store:(e=t.jsonValue,i.f).call(e,([,t])=>Object(o.e)(t)||"")}]):await this.updateValue(t)},onCancel(){this.current=null},onChange(){const{current:t}=this;if(t.error=null,t.jsonPaused)return;const e=performance.now(),s=t.value.trim();try{t.jsonValue=s?JSON.parse(s):void 0}catch(e){t.error=e.message||e,t.jsonValue=void 0}t.jsonPaused=performance.now()-e>10},onStorageChanged(t){var e;const s=null==(e=t[d])?void 0:e.newValue;if(s){this.setData(s);const{current:t}=this;if(t){const e=this.getValue(t.key);e===t.value?t.isNew=!1:(Object.keys(t).filter(t=>"key"!==t&&"value"!==t).forEach(e=>delete t[e]),t.value=e)}}}}},m=(s(163),s(4)),h=Object(m.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"container",staticClass:"edit-values"},[s("div",{staticClass:"mb-1"},[s("button",{on:{click:t.onNew}},[t._v("+")]),s("tooltip",{attrs:{content:t.i18n("editValueAllHint"),align:"left"}},[s("button",{domProps:{textContent:t._s(t.i18n("editValueAll"))},on:{click:t.onEditAll}})]),t.totalPages>1?s("div",{staticClass:"inline-block ml-2"},[s("button",{attrs:{disabled:1===t.page},on:{click:e=>{t.page-=1}}},[t._v("\u2190")]),s("span",{staticClass:"ml-1",domProps:{textContent:t._s(t.page)}}),t._v(" / "),s("span",{staticClass:"mr-1",domProps:{textContent:t._s(t.totalPages)}}),s("button",{attrs:{disabled:t.page>=t.totalPages},on:{click:e=>{t.page+=1}}},[t._v("\u2192")])]):t._e()],1),t.keys?s("div",{staticClass:"edit-values-table"},[t.keys.length?t._e():s("div",{staticClass:"edit-values-empty"},[s("div",{domProps:{textContent:t._s(t.i18n("noValues"))}})]),t._l(t.pageKeys,e=>s("a",{key:e,staticClass:"edit-values-row flex",attrs:{href:"#"},on:{keydown:s=>!s.type.indexOf("key")&&t._k(s.keyCode,"delete",[8,46],s.key,["Backspace","Delete","Del"])?null:s.ctrlKey?s.shiftKey||s.altKey||s.metaKey?null:t.onRemove(e):null,click:s=>(s.preventDefault(),t.onEdit(e))}},[s("div",{staticClass:"ellipsis"},[s("span",{domProps:{textContent:t._s(e)}}),s("div",{staticClass:"edit-values-btn",on:{click:s=>(s.stopPropagation(),s.preventDefault(),t.onRemove(e))}},[s("tooltip",{attrs:{content:"Ctrl-Del: "+t.i18n("buttonRemove")}},[s("icon",{attrs:{name:"trash"}})],1)],1)]),s("div",{staticClass:"ellipsis flex-auto",domProps:{textContent:t._s(t.getValue(e,!0))}})]))],2):t._e(),t.current?s("div",{staticClass:"edit-values-panel flex flex-col"},[s("div",{staticClass:"control"},[s("h4",{domProps:{textContent:t._s(t.current.isAll?t.i18n("labelEditValueAll"):t.i18n("labelEditValue"))}}),s("div",[s("button",{class:{"has-error":t.current.error},attrs:{title:t.current.error,disabled:t.current.error},domProps:{textContent:t._s(t.i18n("editValueSave"))},on:{click:t.onSave}}),s("button",{domProps:{textContent:t._s(t.i18n("editValueCancel"))},on:{click:t.onCancel}})])]),s("label",{directives:[{name:"show",rawName:"v-show",value:!t.current.isAll,expression:"!current.isAll"}]},[s("span",{domProps:{textContent:t._s(t.i18n("valueLabelKey"))}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.current.key,expression:"current.key"}],ref:"key",attrs:{type:"text",readOnly:!t.current.isNew,spellcheck:"false"},domProps:{value:t.current.key},on:{keydown:e=>!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.stopPropagation(),t.onCancel(e)),input:e=>{e.target.composing||t.$set(t.current,"key",e.target.value)}}})]),s("label",[s("span",{domProps:{textContent:t._s(t.current.isAll?t.i18n("valueLabelValueAll"):t.i18n("valueLabelValue"))}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.current.value,expression:"current.value"}],ref:"value",attrs:{spellcheck:"false"},domProps:{value:t.current.value},on:{input:[e=>{e.target.composing||t.$set(t.current,"value",e.target.value)},t.onChange],keydown:e=>!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.stopPropagation(),t.onCancel(e))}})])]):t._e()])}),[],!1,null,null,null);e.a=h.exports},function(t,e,s){"use strict";var a=(s(164),s(4)),n=Object(a.a)({props:["hotkeys"]},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit-help"},[s("div",[s("h3",{domProps:{innerHTML:t._s(t.i18n("editHelpDocumention"))}}),s("a",{attrs:{href:"https://violentmonkey.github.io/api/",rel:"noopener noreferrer",target:"_blank"}},[t._v("violentmonkey.github.io/api/")])]),s("div",{staticClass:"keyboard"},[s("h3",{domProps:{textContent:t._s(t.i18n("editHelpKeyboard"))}}),t._l(t.hotkeys,e=>{var a=e[0],n=e[1];return s("dl",{key:a},[s("dt",{staticClass:"monospace-font",domProps:{textContent:t._s(a)}}),s("dd",{domProps:{textContent:t._s(n)}})])})],2)])}),[],!1,null,null,null);e.a=n.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(t,e,s)=>{"use strict";var a=s(35);s.n(a).a},,,,,,,,,,,,,,,,,,,,,,(t,e,s)=>{"use strict";var a=s(39);s.n(a).a},(t,e,s)=>{"use strict";var a=s(40);s.n(a).a},(t,e,s)=>{"use strict";var a=s(41);s.n(a).a},(t,e,s)=>{"use strict";var a=s(42);s.n(a).a},(t,e,s)=>{"use strict";var a=s(43);s.n(a).a},(t,e,s)=>{"use strict";var a=s(45);s.n(a).a},(t,e,s)=>{"use strict";var a=s(46);s.n(a).a},(t,e,s)=>{"use strict";var a=s(47);s.n(a).a},(t,e,s)=>{"use strict";var a=s(48);s.n(a).a},(t,e,s)=>{"use strict";var a=s(49);s.n(a).a},(t,e,s)=>{"use strict";var a=s(50);s.n(a).a},(t,e,s)=>{"use strict";var a=s(51);s.n(a).a},,,,function(t,e,s){"use strict";s.r(e),s.d(e,"loadData",()=>kt);var a=s(27),n=s(0),o=s(1),i=s(33),r=s(5),l=s(10),c=s(31),d=(s(62),s(8)),u=s(24),p=s(21);function m(){const t=!p.c.pathname||"scripts"===p.c.pathname;document[`${t?"add":"remove"}EventListener`]("keydown",h)}function h(t){if(t.altKey||t.shiftKey||t.metaKey)return;const e=document.querySelector(".filter-search input"),s=document.activeElement;if(s!==e&&(null==s||null==s.matches?void 0:s.matches("button, input, select, textarea")))return;if(1===t.key.length&&!t.ctrlKey||"KeyF"===t.code&&t.ctrlKey)return e.focus(),void(t.ctrlKey&&t.preventDefault());if(t.ctrlKey)return;let a=document.querySelector(".script.focused");switch(t.key){case"Enter":a&&(t.preventDefault(),a.dispatchEvent(new Event("keydownEnter")));break;case"ArrowUp":case"ArrowDown":{t.preventDefault();const e="ArrowUp"===t.key?-1:1,s=document.querySelectorAll('.script:not([style*="display"])'),n=s.length;if(!n)return;if(!a)return void s[e>0?0:n-1].classList.add("focused");a.classList.remove("focused"),a=s[([...s].indexOf(a)+e+n)%n],a.classList.add("focused");const o=a.getBoundingClientRect(),i=a.parentElement.getBoundingClientRect();(o.top>i.bottom||o.bottom<i.top)&&a.scrollIntoView({behavior:"smooth"});break}}}m();var v=s(56),g=s.n(v),f=s(20),b=s.n(f),y=s(17),C=s(26),x=s(25),w=s(59),_=s(6),k=s(57);const S="ontouchstart"in document,P=S?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"dragstart",move:"mousemove",end:"mouseup"},O=S&&Object.assign(document.createElement("div"),{className:"dragging-noscroll"}),j=["scroll","mouseenter","mouseleave"],{addEventListener:$,removeEventListener:U}=EventTarget.prototype;let E,R,A,L,N,D,M,I,V,T,B,z,H,K,F,W,J;function q(t){var e;T=this,D=t,M=setTimeout(G,500,"timer"),(e=document,$).call(e,P.move,G),(e=document,$).call(e,P.end,Y)}function G(t){var e;Y(),"timer"===t&&((e=T,X).call(e,D),l.a.isFirefox&&tt()&&(B.scrollTop+=1,B.scrollTop-=1))}function Y(){var t;clearTimeout(M),(t=document,U).call(t,P.move,G),(t=document,U).call(t,P.end,Y)}function X(t){var e,s;T=this,t.cancelable&&t.preventDefault();const{clientX:a,clientY:n}=(null==(e=t.touches)?void 0:e[0])||t,o=T.getBoundingClientRect(),i=B.getBoundingClientRect();E=T.cloneNode(!0),R=[...B.children],L=R.indexOf(T),N=L,R.splice(L,1),A=o.height,I=a-o.left,V=n-o.top,z=i.top+50,H=i.bottom-50,J={},T.classList.add("dragging-placeholder"),E.classList.add("dragging"),E.style.transform=`translate(${o.left}px, ${o.top}px)`,E.style.width=`${o.width}px`,B.appendChild(E),S&&B.insertAdjacentElement("afterBegin",O),(s=document,$).call(s,P.move,Z),(s=document,$).call(s,P.end,Q)}function Z(t){var e;const{clientX:s,clientY:a,target:n}=(null==(e=t.touches)?void 0:e[0])||t;let o;const i=S?((t,e)=>{var s;const a=`${t}:${e}`;return J[a]||(J[a]=null==(s=document.elementFromPoint(t,e))?void 0:s.closest(".script"))})(s,a):null==n.closest?void 0:n.closest(".script");if(i&&i!==T){const t=i.getBoundingClientRect(),e=a>t.top+t.height/2;o=T!==i[`${e?"next":"previous"}ElementSibling`],o&&(i.insertAdjacentElement(e?"afterEnd":"beforeBegin",T),(t=>{const e=N<t?A:-A,s=R.slice(...N<t?[N,t]:[t,N]);s.forEach(t=>{t.style.transition="none",t.style.transform=`translateY(${e}px)`}),setTimeout(()=>s.forEach(t=>t.removeAttribute("style"))),N=t})(R.indexOf(i)+e))}E.style.transform=`translate(${s-I}px, ${a-V}px)`,((t=>{const e=tt()&&Math.min(1,Math.max(0,t-H,z-t)/50);return!e&&K&&st(),e&&!K&&(K=setInterval(et,16),j.forEach(t=>{var e;return(e=window,$).call(e,t,at,!0)})),F=e&&(t>H?1:-1)*(1+20*e|0),W=performance.now(),!!e})(a)||o)&&(J={})}function Q(){var t;(t=document,U).call(t,P.move,Z),(t=document,U).call(t,P.end,Q),st(),E.remove(),S&&O.remove(),T.classList.remove("dragging-placeholder"),T.dispatchEvent(new Event("VM-drop-event-relay"))}function tt(){return B.scrollHeight>B.clientHeight}function et(){const t=performance.now(),e=F*(t-W)/16;B.scrollTop+=e,W=t}function st(){j.forEach(t=>{var e;return(e=window,U).call(e,t,at,!0)}),K&&clearInterval(K),K=0}function at(t){t.stopPropagation()}var nt={props:["script","draggable","visible"],components:{Icon:u.a,Tooltip:b.a},data(){return{safeIcon:null,canRender:this.visible}},computed:{canUpdate(){const{script:t}=this;return t.config.shouldUpdate&&(t.custom.updateURL||t.meta.updateURL||t.custom.downloadURL||t.meta.downloadURL||t.custom.lastInstallURL)},homepageURL(){const{script:t}=this;return t.custom.homepageURL||t.meta.homepageURL||t.meta.homepage},author(){const t=this.script.meta.author;if(!t)return;const e=t.match(/^(.*?)\s<(\S*?@\S*?)>$/);return{email:e&&e[2],name:e?e[1]:t}},labelEnable(){return this.script.config.enabled?this.i18n("buttonDisable"):this.i18n("buttonEnable")},description(){return this.script.custom.description||Object(n.k)(this.script.meta,"description")},updatedAt(){const{props:t,config:e}=this.script,s={};let a;if(e.removed?({lastModified:a}=t):a=t.lastUpdated||t.lastModified,a){const t=new Date(a);s.show=Object(n.h)(Date.now()-a),e.removed?s.title=this.i18n("labelRemovedAt",t.toLocaleString()):s.title=this.i18n("labelLastUpdatedAt",t.toLocaleString())}return s}},watch:{visible(t){t&&(this.canRender=!0)}},mounted(){Object(k.a)(this.script,{cache:d.a.cache}).then(()=>{this.safeIcon=this.script.safeIcon||`/public/images/icon${d.a.HiDPI?128:this.script.config.removed?32:38}.png`}),((t,{onDrop:e})=>{B||(B=t.parentElement,S&&!matchMedia("(pointer: coarse)").matches&&B.classList.add("touch")),$.call(t,P.start,S?q:X),$.call(t,"VM-drop-event-relay",()=>e(L,N))})(this.$el,{onDrop:(t,e)=>this.$emit("move",{from:t,to:e})})},methods:{onEdit(){this.$emit("edit",this.script.props.id)},markRemoved(t){Object(n.v)("MarkRemoved",{id:this.script.props.id,removed:t})},onRemove(){const t=this.$el.getBoundingClientRect();this.markRemoved(1),this.$emit("remove",this.script.props.id,t)},onRestore(){this.markRemoved(0)},onEnable(){Object(n.v)("UpdateScriptInfo",{id:this.script.props.id,config:{enabled:this.script.config.enabled?0:1}})},onUpdate(){Object(n.v)("CheckUpdate",this.script.props.id)}}},ot=(s(140),s(4)),it=Object(ot.a)(nt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"script",class:{disabled:!t.script.config.enabled,removed:t.script.config.removed,error:t.script.error},attrs:{draggable:t.draggable},on:{keydownEnter:t.onEdit}},[s("img",{staticClass:"script-icon hidden-xs",attrs:{src:t.safeIcon},on:{click:t.onEdit}}),s("div",{staticClass:"script-info flex"},[s("div",{staticClass:"script-name ellipsis flex-auto",domProps:{textContent:t._s(t.script.$cache.name)}}),t.canRender?[t.author?s("tooltip",{staticClass:"script-author ml-1 hidden-sm",attrs:{content:t.i18n("labelAuthor")+t.script.meta.author,align:"end"}},[s("icon",{attrs:{name:"author"}}),t.author.email?s("a",{staticClass:"ellipsis ml-1",attrs:{href:"mailto:"+t.author.email},domProps:{textContent:t._s(t.author.name)}}):s("span",{staticClass:"ellipsis ml-1",domProps:{textContent:t._s(t.author.name)}})],1):t._e(),s("tooltip",{staticClass:"ml-1 hidden-sm",attrs:{content:t.updatedAt.title,align:"end"}},[s("span",{domProps:{textContent:t._s(t.script.meta.version?"v"+t.script.meta.version:"")}}),s("span",{staticClass:"ml-1",domProps:{textContent:t._s(t.updatedAt.show)}})]),t.script.config.removed?s("div",{staticClass:"ml-1"},[s("tooltip",{attrs:{content:t.i18n("buttonRestore"),placement:"left"}},[s("span",{staticClass:"btn-ghost",on:{click:t.onRestore}},[s("icon",{attrs:{name:"undo"}})],1)])],1):t._e()]:t._e()],2),t.canRender?[s("div",{staticClass:"script-buttons flex"},[s("div",{staticClass:"flex-auto flex flex-wrap"},[s("tooltip",{attrs:{content:t.i18n("buttonEdit"),align:"start"}},[s("span",{staticClass:"btn-ghost",on:{click:t.onEdit}},[s("icon",{attrs:{name:"code"}})],1)]),s("tooltip",{attrs:{content:t.labelEnable,align:"start"}},[s("span",{staticClass:"btn-ghost",on:{click:t.onEnable}},[s("icon",{attrs:{name:"toggle-"+(t.script.config.enabled?"on":"off")}})],1)]),s("tooltip",{attrs:{disabled:!t.canUpdate||t.script.checking,content:t.i18n("buttonUpdate"),align:"start"}},[s("span",{staticClass:"btn-ghost",on:{click:t.onUpdate}},[s("icon",{attrs:{name:"refresh"}})],1)]),s("span",{staticClass:"sep"}),s("tooltip",{attrs:{disabled:!t.homepageURL,content:t.i18n("buttonHome"),align:"start"}},[s("a",{staticClass:"btn-ghost",attrs:{target:"_blank",rel:"noopener noreferrer",href:t.homepageURL}},[s("icon",{attrs:{name:"home"}})],1)]),s("tooltip",{attrs:{disabled:!t.description,content:t.description,align:"start"}},[s("span",{staticClass:"btn-ghost"},[s("icon",{attrs:{name:"info"}})],1)]),s("tooltip",{attrs:{disabled:!t.script.meta.supportURL,content:t.i18n("buttonSupport"),align:"start"}},[s("a",{staticClass:"btn-ghost",attrs:{target:"_blank",rel:"noopener noreferrer",href:t.script.meta.supportURL}},[s("icon",{attrs:{name:"question"}})],1)]),s("div",{staticClass:"script-message",attrs:{title:t.script.error},domProps:{textContent:t._s(t.script.message)}})],1),s("tooltip",{attrs:{content:t.i18n("buttonRemove"),align:"end"}},[s("span",{staticClass:"btn-ghost",on:{click:t.onRemove}},[s("icon",{attrs:{name:"trash"}})],1)])],1)]:t._e()],2)}),[],!1,null,null,null).exports,rt=s(36).a,lt=(s(165),Object(ot.a)(rt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit frame flex flex-col fixed-full"},[s("div",{staticClass:"edit-header flex"},[s("nav",t._l(t.navItems,(e,a)=>s("div",{key:a,staticClass:"edit-nav-item",class:{active:t.nav===a},domProps:{textContent:t._s(e)},on:{click:e=>{t.nav=a}}})),0),s("div",{staticClass:"edit-name text-center ellipsis flex-1 mr-1",domProps:{textContent:t._s(t.scriptName)}}),s("div",{staticClass:"edit-hint text-right ellipsis mr-1"},[s("a",{attrs:{href:"https://violentmonkey.github.io/posts/how-to-edit-scripts-with-your-favorite-editor/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("editHowToHint"))}})]),s("div",{staticClass:"edit-buttons mr-1"},[s("button",{attrs:{disabled:!t.canSave},domProps:{textContent:t._s(t.i18n("buttonSave"))},on:{click:t.save}}),s("button",{attrs:{disabled:!t.canSave},domProps:{textContent:t._s(t.i18n("buttonSaveClose"))},on:{click:t.saveClose}}),s("button",{domProps:{textContent:t._s(t.i18n("buttonClose"))},on:{click:t.close}})])]),s("div",{staticClass:"frame-block flex-auto pos-rel"},[s("vm-code",{directives:[{name:"show",rawName:"v-show",value:"code"===t.nav,expression:"nav === 'code'"}],ref:"code",staticClass:"abs-full",attrs:{active:"code"===t.nav,commands:t.commands},on:{"code-dirty":e=>{t.codeDirty=e}},model:{value:t.code,callback:e=>{t.code=e},expression:"code"}}),s("vm-settings",{directives:[{name:"show",rawName:"v-show",value:"settings"===t.nav,expression:"nav === 'settings'"}],staticClass:"abs-full edit-body",attrs:{active:"settings"===t.nav,settings:t.settings,value:t.script}}),s("vm-values",{directives:[{name:"show",rawName:"v-show",value:"values"===t.nav,expression:"nav === 'values'"}],staticClass:"abs-full edit-body",attrs:{active:"values"===t.nav,script:t.script}}),s("vm-help",{directives:[{name:"show",rawName:"v-show",value:"help"===t.nav,expression:"nav === 'help'"}],staticClass:"abs-full edit-body",attrs:{hotkeys:t.hotkeys}})],1)])}),[],!1,null,null,null).exports);const ct={sort:{exec:{title:Object(n.m)("filterExecutionOrder")},alpha:{title:Object(n.m)("filterAlphabeticalOrder"),compare:({$cache:{lowerName:t}},{$cache:{lowerName:e}})=>t<e?-1:t>e},update:{title:Object(n.m)("filterLastUpdateOrder"),compare:({props:{lastUpdated:t}},{props:{lastUpdated:e}})=>(+e||0)-(+t||0)}}},dt={value:null,title:null},ut={searchScope:null,showEnabledFirst:null,get sort(){return dt},set sort(t){const e=ct.sort[t];e?(dt.value=t,dt.title=e.title):ut.sort=Object.keys(ct.sort)[0]}};o.d.call(ut,t=>{Object(x.a)(`filters.${t}`,e=>{ut[t]=e})});let pt=0;var mt={components:{ScriptItem:it,Edit:lt,Tooltip:b.a,SettingCheck:C.a,LocaleGroup:w.a,Dropdown:g.a,Icon:u.a},data:()=>({store:d.a,filterOptions:ct,filters:ut,script:null,search:null,searchError:null,modal:null,menuNewActive:!1,showRecycle:!1,sortedScripts:[],removing:null,canRenderScripts:!d.a.route.paths[1],batchRender:{limit:pt}}),watch:{search:"scheduleSearch","filters.sort.value":"updateLater","filters.showEnabledFirst":"updateLater",showRecycle:"onUpdate",scripts:"refreshUI","store.route.paths.1":"onHashChange"},computed:{currentSortCompare(){var t;return null==(t=ct.sort[ut.sort.value])?void 0:t.compare},message(){if(this.store.loading)return null;const t=this.sortedScripts;return(this.search?t.find(t=>!1!==t.$cache.show):t.length)?null:Object(n.m)("labelNoSearchScripts")},scripts(){return this.store.scripts.filter(t=>!t.config.removed)},searchNeedsCodeIds(){return this.search&&["code","all"].includes(ut.searchScope)&&this.store.scripts.filter(t=>null==t.$cache.code).map(t=>t.props.id)},trash(){return this.store.scripts.filter(t=>t.config.removed)}},methods:{async refreshUI(){const t=this.searchNeedsCodeIds;(null==t?void 0:t.length)&&await this.getCodeFromStorage(t),this.onUpdate(),this.onHashChange()},onUpdate(){const t=[...this.showRecycle?this.trash:this.scripts],e=this.search?this.performSearch(t):t.length,s=this.currentSortCompare;var a;s&&t.sort((a=s,ut.showEnabledFirst?(t,e)=>e.config.enabled-t.config.enabled||a(t,e):a)),this.sortedScripts=t,!pt||e<pt?this.renderScripts():this.debouncedRender()},updateLater(){this.debouncedUpdate()},updateAll(){Object(n.v)("CheckUpdateAll")},async installFromURL(){try{var t;let e=await Object(y.a)(Object(n.m)("hintInputURL"),{input:"",ok:{type:"submit"}});e=null==(t=e)?void 0:t.trim(),e&&(e.includes("://")||(e=`https://${e}`),new URL(e)&&await Object(n.v)("ConfirmInstall",{url:e}))}catch(t){t&&Object(y.b)({text:t})}},moveScript(t){t.from!==t.to&&Object(n.v)("Move",{id:this.scripts[t.from].props.id,offset:t.to-t.from}).then(()=>{const{scripts:e}=this,s=Math.min(t.from,t.to),a=Math.max(t.from,t.to),n=[e.slice(0,s),e.slice(s,a+1),e.slice(a+1)];s===t.to?n[1].unshift(n[1].pop()):n[1].push(n[1].shift()),this.store.scripts=[...n.flat(),...this.trash]})},onOrderChange(t){r.a.set("filters.sort",t.target.value)},onScopeChange(t){this.search&&this.scheduleSearch(),r.a.set("filters.searchScope",t.target.value)},onStateChange(t){this.menuNewActive=t},onEditScript(t){const e=["scripts",t].filter(Boolean).join("/");t||e!==Object(p.b)().pathname?Object(p.d)(e):window.history.back()},onHashChange(){const[t,e]=this.store.route.paths;if("_new"===e)this.script={};else{const s=e&&+e||null;this.script=s&&this.scripts.find(t=>t.props.id===s),this.script||(this.canRenderScripts||(kt(),this.canRenderScripts=!0),this.debouncedRender(),e&&Object(p.d)(t,!0))}},toggleRecycle(){this.showRecycle=!this.showRecycle},onRemove(t,e){const{trash:s}=this.$refs;if(!s||this.removing)return;const a=s.getBoundingClientRect();this.removing={id:t,animation:{width:`${a.width}px`,height:`${a.height}px`,top:`${a.top}px`,left:`${a.left}px`,transform:`translate(${e.left-a.left}px,${e.top-a.top}px) scale(${e.width/a.width},${e.height/a.height})`,transition:"transform .3s"}},setTimeout(()=>{this.removing.animation.transform="translate(0,0) scale(1,1)",setTimeout(()=>{this.removing=null},300)})},async renderScripts(){if(!this.canRenderScripts)return;const{length:t}=this.sortedScripts;let e=9;const s={limit:e};this.batchRender=s;const a=performance.now();for(;e<t&&s===this.batchRender;){if(pt&&this.search)for(let s=0;s<pt&&e<t;e+=1)s+=this.sortedScripts[e].$cache.show?1:0;else e+=pt||1;s.limit=e,await new Promise(t=>this.$nextTick(t)),!pt&&performance.now()-a>=100&&(pt=2*e),pt&&e<t&&await Object(n.r)()}},performSearch(t){let e,s=0;const[,a=this.search.replace(/[.+^*$?|\\()[\]{}]/g,"\\$&"),n="i"]=this.search.match(/^\/(.+?)\/(\w*)$|$/),o=ut.searchScope,i="name"===o||"all"===o,r="code"===o||"all"===o;try{e=a&&new RegExp(a,n),t.forEach(({$cache:t})=>{t.show=!a||i&&e.test(t.search)||r&&e.test(t.code),s+=t.show}),this.searchError=null}catch(t){this.searchError=t.message}return s},async scheduleSearch(){const t=this.searchNeedsCodeIds;(null==t?void 0:t.length)&&await this.getCodeFromStorage(t),this.debouncedUpdate()},async getCodeFromStorage(t){const e=await _.a.code.getMulti(t);this.store.scripts.forEach(({$cache:t,props:{id:s}})=>{s in e&&(t.code=e[s])})},async emptyRecycleBin(){try{await Object(y.a)(Object(n.m)("buttonEmptyRecycleBin")),Object(n.v)("CheckRemove",{force:!0}),d.a.scripts=d.a.scripts.filter(t=>!t.config.removed)}catch(t){}}},created(){this.debouncedUpdate=Object(n.c)(this.onUpdate,100),this.debouncedRender=Object(n.c)(this.renderScripts)},mounted(){d.a.loading||this.refreshUI()}},ht=(s(166),Object(ot.a)(mt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-installed flex flex-col"},[t.canRenderScripts?s("div",{staticClass:"flex flex-col flex-auto"},[s("header",{staticClass:"flex"},[t.showRecycle?s("div",{staticClass:"flex-auto",domProps:{textContent:t._s(t.i18n("headerRecycleBin")+(t.trash.length?" ("+t.trash.length+")":""))}}):s("div",{staticClass:"flex-auto"},[s("dropdown",{class:{active:t.menuNewActive},attrs:{closeAfterClick:!0},on:{stateChange:t.onStateChange}},[s("tooltip",{attrs:{slot:"toggle",content:t.i18n("buttonNew"),placement:"bottom",align:"start"},slot:"toggle"},[s("span",{staticClass:"btn-ghost"},[s("icon",{attrs:{name:"plus"}})],1)]),s("div",{staticClass:"dropdown-menu-item",domProps:{textContent:t._s(t.i18n("buttonNew"))},on:{click:e=>(e.preventDefault(),t.onEditScript("_new"))}}),s("a",{staticClass:"dropdown-menu-item",attrs:{href:"https://openuserjs.org/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("installFrom","OpenUserJS"))}}),s("a",{staticClass:"dropdown-menu-item",attrs:{href:"https://greasyfork.org/scripts",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("installFrom","GreasyFork"))}}),s("div",{staticClass:"dropdown-menu-item",domProps:{textContent:t._s(t.i18n("buttonInstallFromURL"))},on:{click:e=>(e.preventDefault(),t.installFromURL(e))}})],1),s("tooltip",{attrs:{content:t.i18n("buttonUpdateAll"),placement:"bottom",align:"start"}},[s("span",{staticClass:"btn-ghost",on:{click:t.updateAll}},[s("icon",{attrs:{name:"refresh"}})],1)])],1),s("tooltip",{attrs:{content:t.i18n("buttonRecycleBin"),placement:"bottom"}},[s("span",{ref:"trash",staticClass:"btn-ghost trash-button",class:{active:t.showRecycle,filled:t.trash.length},on:{click:t.toggleRecycle}},[s("icon",{attrs:{name:"trash"}}),t.trash.length?s("b",{domProps:{textContent:t._s(t.trash.length)}}):t._e()],1)]),s("dropdown",{staticClass:"filter-sort",attrs:{align:"right"}},[s("tooltip",{attrs:{slot:"toggle",content:t.i18n("buttonFilter"),placement:"bottom"},slot:"toggle"},[s("span",{staticClass:"btn-ghost"},[s("icon",{attrs:{name:"filter"}})],1)]),s("div",[s("locale-group",{attrs:{"i18n-key":"labelFilterSort"}},[s("select",{domProps:{value:t.filters.sort.value},on:{change:t.onOrderChange}},t._l(t.filterOptions.sort,(e,a)=>s("option",{key:a,domProps:{value:a,textContent:t._s(e.title)}})),0)])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.currentSortCompare,expression:"currentSortCompare"}]},[s("label",[s("setting-check",{attrs:{name:"filters.showEnabledFirst"}}),s("span",{domProps:{textContent:t._s(t.i18n("optionShowEnabledFirst"))}})],1)])],1),s("form",{staticClass:"filter-search hidden-xs flex",on:{submit:t=>{t.preventDefault()}}},[s("tooltip",{attrs:{placement:"bottom"}},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],class:{"has-error":t.searchError},attrs:{type:"search",placeholder:t.i18n("labelSearchScript"),id:"installed-search"},domProps:{value:t.search},on:{input:e=>{e.target.composing||(t.search=e.target.value)}}}),s("icon",{attrs:{name:"search"}})],1),s("pre",{staticClass:"filter-search-tooltip",attrs:{slot:"content"},domProps:{textContent:t._s(t.searchError||t.i18n("titleSearchHint"))},slot:"content"},[t._v("          ")])]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.searchScope,expression:"filters.searchScope"}],on:{change:[e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.filters,"searchScope",e.target.multiple?s:s[0])},t.onScopeChange]}},[s("option",{attrs:{value:"name"},domProps:{textContent:t._s(t.i18n("filterScopeName"))}}),s("option",{attrs:{value:"code"},domProps:{textContent:t._s(t.i18n("filterScopeCode"))}}),s("option",{attrs:{value:"all"},domProps:{textContent:t._s(t.i18n("filterScopeAll"))}})])],1)],1),t.showRecycle?s("div",{staticClass:"trash-hint mx-1 my-1 flex flex-col"},[s("span",{domProps:{textContent:t._s(t.i18n("hintRecycleBin"))}}),t.trash.length?s("a",{attrs:{href:"#"},domProps:{textContent:t._s(t.i18n("buttonEmptyRecycleBin"))},on:{click:e=>(e.preventDefault(),t.emptyRecycleBin(e))}}):t._e()]):t._e(),s("div",{staticClass:"flex-auto pos-rel"},[s("div",{staticClass:"scripts abs-full"},t._l(t.sortedScripts,(e,a)=>s("script-item",{directives:[{name:"show",rawName:"v-show",value:!t.search||!1!==e.$cache.show,expression:"!search || script.$cache.show !== false"}],key:e.props.id,class:{removing:t.removing&&t.removing.id===e.props.id},attrs:{script:e,draggable:"exec"===t.filters.sort.value&&!e.config.removed,visible:a<t.batchRender.limit},on:{edit:t.onEditScript,move:t.moveScript,remove:t.onRemove}})),1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.message,expression:"message"}],staticClass:"backdrop abs-full",class:{mask:t.store.loading}},[s("div",{domProps:{innerHTML:t._s(t.message)}})])])]):t._e(),t.script?s("edit",{attrs:{initial:t.script},on:{close:e=>t.onEditScript()}}):t._e(),t.removing?s("div",{staticClass:"trash-animate",style:t.removing.animation}):t._e()],1)}),[],!1,null,null,null).exports),vt=s(44).a,gt=(s(171),Object(ot.a)(vt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-settings"},[s("h1",{staticClass:"mt-0",domProps:{textContent:t._s(t.i18n("labelSettings"))}}),s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelGeneral"))}}),s("div",{staticClass:"mb-1"},[s("label",[s("setting-check",{attrs:{name:"autoReload"}}),s("span",{domProps:{textContent:t._s(t.i18n("labelAutoReloadCurrentTab"))}})],1)]),s("div",{staticClass:"mb-1"},[s("label",{staticClass:"mr-2"},[s("setting-check",{attrs:{name:"editorWindow"}}),s("tooltip",{attrs:{content:t.editorWindowHint,disabled:!t.editorWindowHint}},[s("span",{domProps:{textContent:t._s(t.i18n("optionEditorWindow"))}})])],1),s("label",[s("setting-check",{attrs:{name:"editorWindowSimple"}}),s("span",{domProps:{textContent:t._s(t.i18n("optionEditorWindowSimple"))}})],1)]),s("div",{staticClass:"mb-1"},[s("label",[s("locale-group",{attrs:{"i18n-key":"labelPopupSort"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.settings["filtersPopup.sort"],expression:"settings['filtersPopup.sort']"}],on:{change:e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.settings,"filtersPopup.sort",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"exec"},domProps:{textContent:t._s(t.i18n("filterExecutionOrder"))}}),s("option",{attrs:{value:"alpha"},domProps:{textContent:t._s(t.i18n("filterAlphabeticalOrder"))}})])])],1),s("label",{staticClass:"ml-2"},[s("setting-check",{attrs:{name:"filtersPopup.enabledFirst"}}),s("span",{domProps:{textContent:t._s(t.i18n("optionPopupEnabledFirst"))}})],1),s("label",{staticClass:"ml-2"},[s("setting-check",{attrs:{name:"filtersPopup.hideDisabled"}}),s("span",{domProps:{textContent:t._s(t.i18n("optionPopupHideDisabled"))}})],1)]),s("div",{staticClass:"mb-1"},[s("label",[s("span",{domProps:{textContent:t._s(t.i18n("labelBadge"))}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.settings.showBadge,expression:"settings.showBadge"}],on:{change:e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.settings,"showBadge",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""},domProps:{textContent:t._s(t.i18n("labelBadgeNone"))}}),s("option",{attrs:{value:"unique"},domProps:{textContent:t._s(t.i18n("labelBadgeUnique"))}}),s("option",{attrs:{value:"total"},domProps:{textContent:t._s(t.i18n("labelBadgeTotal"))}})])])])]),s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("titleScriptUpdated"))}}),s("div",{staticClass:"mb-1"},[s("label",[s("locale-group",{attrs:{"i18n-key":"labelAutoUpdate"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.autoUpdate,expression:"settings.autoUpdate"}],attrs:{type:"number",min:"0",max:"365",step:"1/"},domProps:{value:t.settings.autoUpdate},on:{input:e=>{e.target.composing||t.$set(t.settings,"autoUpdate",e.target.value)}}})])],1)]),s("div",{staticClass:"mb-1"},[s("label",[s("setting-check",{attrs:{name:"notifyUpdates"}}),s("span",{domProps:{textContent:t._s(t.i18n("labelNotifyUpdates"))}})],1),s("label",{staticClass:"ml-2"},[s("setting-check",{attrs:{name:"notifyUpdatesGlobal"}}),s("span",{domProps:{textContent:t._s(t.i18n("labelNotifyUpdatesGlobal"))}})],1)])]),s("vm-import"),s("vm-export"),s("vm-sync"),s("div",{staticClass:"show-advanced"},[s("button",{on:{click:e=>{t.showAdvanced=!t.showAdvanced}}},[s("span",{domProps:{textContent:t._s(t.i18n("labelAdvanced"))}}),s("icon",{class:{rotate:t.showAdvanced},attrs:{name:"arrow"}})],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showAdvanced,expression:"showAdvanced"}]},[s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelGeneral"))}}),s("div",{staticClass:"mb-1"},[s("label",[s("span",{domProps:{textContent:t._s(t.i18n("labelInjectionMode"))}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.settings.defaultInjectInto,expression:"settings.defaultInjectInto"}],on:{change:e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.settings,"defaultInjectInto",e.target.multiple?s:s[0])}}},t._l(t.injectIntoOptions,e=>s("option",{key:e,domProps:{value:e,textContent:t._s(e)}})),0),s("a",{staticClass:"ml-1",attrs:{href:"https://violentmonkey.github.io/posts/inject-into-context/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("learnInjectionMode"))}})])]),s("div",{staticClass:"mb-1"},[s("locale-group",{attrs:{"i18n-key":"labelExposeStatus"}},t._l(t.expose,e=>{var a=e[0],n=e[1];return s("label",{key:n,staticClass:"mr-1 valign-tb"},[s("setting-check",{attrs:{name:"expose."+a}}),s("span",{staticClass:"mr-1",domProps:{textContent:t._s(n)}}),s("a",{attrs:{href:"https://"+n,target:"_blank",rel:"noopener noreferrer"}},[t._v("\u2197")])],1)}),0)],1)]),s("vm-editor"),s("vm-template"),s("vm-blacklist"),s("vm-css")],1)],1)}),[],!1,null,null,null).exports);const ft={version:"2.12.9",language:browser.i18n.getUILanguage()};var bt={data:()=>ft};s(172);const yt={scripts:ht,settings:gt,about:Object(ot.a)(bt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-about"},[s("h1",{staticClass:"mt-0"},[s("span",{staticClass:"mr-1",domProps:{textContent:t._s(t.i18n("labelAbout"))}}),s("small",{domProps:{textContent:t._s("v"+t.version)}})]),s("p",{staticClass:"mb-2",domProps:{textContent:t._s(t.i18n("extDescription"))}}),s("div",{staticClass:"mb-2"},[s("a",{attrs:{href:"",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelDonate"))}}),s("span",{staticClass:"text-red"},[t._v(" \u2665")])]),s("div",{staticClass:"mb-1"},[s("label",{domProps:{textContent:t._s(t.i18n("labelRelated"))}}),s("ul",[s("li",[s("a",{attrs:{href:"https://violentmonkey.github.io",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelHomepage"))}})]),s("li",[s("a",{attrs:{href:"https://github.com/violentmonkey/violentmonkey/issues",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelFeedback"))}})]),s("li",[s("a",{attrs:{href:"",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelContributors"))}})]),s("li",[s("a",{attrs:{href:"https://violentmonkey.github.io/privacy/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelPrivacyPolicy"))}})])])]),s("div",{staticClass:"mb-1"},[s("label",{domProps:{textContent:t._s(t.i18n("labelCurrentLang"))}}),s("span",{staticClass:"current",domProps:{textContent:t._s(t.language)}}),t._v(" | "),s("a",{attrs:{href:"https://violentmonkey.github.io/localization/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelHelpTranslate"))}})])])}),[],!1,null,null,null).exports},Ct=Object(n.m)("extName");var xt={components:{Icon:u.a},data(){const[t,e]=d.a.route.paths;return{aside:!1,canRenderAside:"scripts"!==t||"_new"!==e&&!Number(e),store:d.a}},computed:{tab(){let t=this.store.route.paths[0];return yt[t]||(t="scripts"),t},tabComponent(){return yt[this.tab]}},watch:{"store.title"(t){document.title=t?`${t} - ${Ct}`:Ct},"store.route.paths"(){m(),this.canRenderAside=!0}}},wt=(s(173),Object(ot.a)(xt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-options flex h-100"},[t.canRenderAside?s("aside",{class:{"show-aside":t.aside}},[s("div",{staticClass:"aside-content"},[s("img",{attrs:{src:"/public/images/icon128.png"}}),s("h1",{staticClass:"hidden-xs",domProps:{textContent:t._s(t.i18n("extName"))}}),s("div",{staticClass:"aside-menu"},[s("a",{class:{active:"scripts"===t.tab},attrs:{href:"#scripts"},domProps:{textContent:t._s(t.i18n("sideMenuInstalled"))}}),s("a",{class:{active:"settings"===t.tab},attrs:{href:"#settings"},domProps:{textContent:t._s(t.i18n("sideMenuSettings"))}}),s("a",{class:{active:"about"===t.tab},attrs:{href:"#about"},domProps:{textContent:t._s(t.i18n("sideMenuAbout"))}})])])]):t._e(),s("keep-alive",[s(t.tabComponent,{tag:"component",staticClass:"tab flex-auto"})],1)],1)}),[],!1,null,null,null).exports);function _t(t){const e=t.meta||{},s=Object(n.k)(e,"name"),a=[e.name,s,e.description,Object(n.k)(e,"description"),t.custom.name,t.custom.description].filter(Boolean).join("\n"),o=t.custom.name||s,i=o.toLowerCase();t.$cache={search:a,name:o,lowerName:i}}async function kt(){const t=d.a.route.paths[1],e=t?[+t].filter(Boolean):null,[{cache:s,scripts:a,sync:i}]=await Promise.all([Object(n.w)("GetData",e,{retry:!0}),r.a.ready]);if(s){const t=d.a.cache||{};o.c.call(s,([e,a])=>{const n=t[e]||a&&`data:image/png;base64,${a.split(",").pop()}`;n&&(s[e]=n)})}null==a||a.forEach(_t),d.a.scripts=a,d.a.cache=s,d.a.sync=i,d.a.loading=!1}a.default.prototype.i18n=n.m,Object.assign(d.a,{loading:!1,cache:{},scripts:[],sync:[],title:null}),(()=>{if(d.a.loading=!0,kt(),Object.assign(i.a,{ScriptsUpdated(){kt()},UpdateSync(t){d.a.sync=t},AddScript({update:t}){t.message="",_t(t),d.a.scripts.push(t)},UpdateScript(t){if(!t)return;const e=d.a.scripts.findIndex(e=>e.props.id===t.where.id);if(e>=0){const s=Object.assign({},d.a.scripts[e],t.update);s.error&&!t.update.error&&(s.error=null),a.default.set(d.a.scripts,e,s),_t(s)}},RemoveScript(t){const e=d.a.scripts.findIndex(e=>e.props.id===t);e>=0&&d.a.scripts.splice(e,1)}}),d.a.HiDPI=matchMedia("screen and (min-resolution: 144dpi)").matches,l.a.isFirefox){const t=browser.runtime.getManifest().browser_action.default_icon,e=document.createElement("link");e.rel="icon",e.href=t[d.a.HiDPI?32:16],document.head.appendChild(e)}const t=new a.default({render:t=>t(wt)}).$mount();document.body.append(t.$el),Object(c.a)().then(t=>{d.a.zip=t,t.workerScriptsPath="/public/lib/zip.js/"})})()}]);